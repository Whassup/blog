<!DOCTYPE html><html lang="en"><head><script src="https://www.googletagmanager.com/gtag/js?id=G-DKF8TFF9J4" async></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-DKF8TFF9J4")</script><meta charset="utf-8"><link href="/blog/favicon.ico" rel="icon"><meta content="width=device-width,initial-scale=1" name="viewport"><meta content="#000000" name="theme-color"><link href="/blog/logo192.png" rel="apple-touch-icon"><link href="/blog/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"><link href="/blog/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"><link href="/blog/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"><link href="/safari-pinned-tab.svg" rel="mask-icon" color="#5bbad5"><meta content="#da532c" name="msapplication-TileColor"><meta content="#ffffff" name="theme-color"><link href="/blog/manifest.json" rel="manifest"><title>How our team writes React tests and other stuff too | Robert Prib | Blog</title><link href="/blog/static/css/main.abc400c6.chunk.css" rel="stylesheet"><link href="https://www.googletagmanager.com" rel="preconnect"><link href="https://fonts.googleapis.com" rel="preconnect"><style data-styled="active" data-styled-version="5.3.0">.jvCTkj{display:flex;flex-direction:column;padding:4rem 2rem;-webkit-box-align:center;align-items:center}@media screen and (max-width:599px){.jvCTkj{padding:1rem .5rem}}.gfuSqG{font-size:3.5rem;margin-bottom:4rem}@media screen and (max-width:599px){.gfuSqG{font-size:1.75rem;margin-bottom:1rem}}.dJXsSm{color:#000;font-weight:700}.kksiKu{display:flex;gap:1rem 1rem;-webkit-box-pack:center;justify-content:center}.iylGhi{text-decoration:none;text-transform:uppercase;color:#95a1b1}.jcTaHb{font-size:2.5rem;font-weight:700;margin-bottom:1.5rem}.jcTaHb>*{color:#000}.hydYaP{font-size:2rem;font-weight:700;margin-bottom:1.5rem}.kMthTr{color:#95a1b1;fill:#95a1b1;display:block;margin-bottom:1.25rem}.eysHZq{margin-bottom:1.25rem;margin-top:.5rem;text-align:left}.XJxhY{margin-bottom:1.5rem;text-align:left}.dJdFwe{margin-bottom:.5rem;margin-left:1.5rem;text-align:left;list-style:inside disc}.bAVzgZ{color:#2379be;text-decoration:underline}.jibPFy{font-weight:400}.DykGo{color:#f55e00;background-color:#fdf6e3;border-radius:.1em;padding:.5rem;white-space:nowrap}.jEEywD{padding-left:1rem;border-left:10px solid #35fdbe;font-style:italic;font-size:1rem;font-weight:400}.iPexDg{font-weight:300}.kFmqyc svg{width:1rem}.syKsX{background-color:#f7fff6;border-radius:1rem}@media screen and (min-width:769px){.syKsX{padding:2rem 25%}}@media screen and (max-width:768px) and (min-width:600px){.syKsX{padding:2rem 10%}}@media screen and (max-width:599px){.syKsX{padding:2rem 5%}}</style><meta content="Write React tests that are easy to read, write and reduced wasted time on decisions." name="description" data-react-helmet="true"><meta content="How our team writes React tests and other stuff too | Robert Prib | Blog " name="og:title" data-react-helmet="true"><meta content="Write React tests that are easy to read, write and reduced wasted time on decisions." name="og:description" data-react-helmet="true"><meta content="https://whassup.github.io/blog/article/how-our-team-writes-tests" name="og:url" data-react-helmet="true"><meta content="https://whassup.github.io/blog/article/how-our-team-writes-tests" name="og:image" data-react-helmet="true"><link href="https://fonts.gstatic.com" rel="preconnect"></head><body><noscript>You need to enable JavaScript to run this app.</noscript><div id="root"><div class="App"><header class="sc-bdnxRM jvCTkj"><h1 class="sc-gtsrHT gfuSqG">() => "<strong class="sc-dlnjwi dJXsSm">Robert Prib</strong>"</h1><nav class="sc-hKFxyN kksiKu"><a class="sc-eCApnc iylGhi" href="/blog">Home</a><a class="sc-eCApnc iylGhi" href="/blog/contact">Contact</a></nav></header><article class="sc-hBMUJo syKsX"><h1 class="sc-jSFjdj jcTaHb">How our team writes React tests and other stuff too</h1><section class="sc-iCoGMd kMthTr"><time><i class="sc-ksluID kFmqyc"><svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm64-192c0-8.8 7.2-16 16-16h96c8.8 0 16 7.2 16 16v96c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16v-96zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"></path></svg></i>5 June 2021</time> <span><i class="sc-ksluID kFmqyc"><svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M432 304c0 114.9-93.1 208-208 208S16 418.9 16 304c0-104 76.3-190.2 176-205.5V64h-28c-6.6 0-12-5.4-12-12V12c0-6.6 5.4-12 12-12h120c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-28v34.5c37.5 5.8 71.7 21.6 99.7 44.6l27.5-27.5c4.7-4.7 12.3-4.7 17 0l28.3 28.3c4.7 4.7 4.7 12.3 0 17l-29.4 29.4-.6.6C419.7 223.3 432 262.2 432 304zm-176 36V188.5c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12V340c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z"></path></svg></i>8 minute read</span></section><section><p class="sc-fujyAs eysHZq">Have you ever worked in a codebase where each test file was different to the next? Different terminology and grouping of test scenarios; different usages of snapshot testing and react-testing-library.</p><p class="sc-fujyAs eysHZq">The effect of this meant wasted time reading a full test file to understand its structure before adding another test case. Creating new tests involved making multiple decisions; should I copy the structure of an existing test or create a new one? Should I use snapshot tests?</p><p class="sc-fujyAs eysHZq">We solved this problem by defining guidelines to follow, that make writing tests that are easy to read and write, and would reduced wasted time on decisions.</p><p class="sc-fujyAs eysHZq">Our guidelines are as follows:</p><ul class="sc-pNWdM XJxhY"><li class="sc-jrsJWt dJdFwe">Group tests by render and user behaviours</li><li class="sc-jrsJWt dJdFwe">Use a snapshot test to validate render</li><li class="sc-jrsJWt dJdFwe">Use GIVEN-WHEN-THEN to describe branching logic</li><li class="sc-jrsJWt dJdFwe">Don't be afraid to stub child components <a class="sc-kEqXSa bAVzgZ" href="https://ericdcobb.medium.com/advanced-react-component-mocks-with-jest-and-react-testing-library-f1ae8838400b" target="_blank">also know in Jest as mocking</a></li><li class="sc-jrsJWt dJdFwe">Don't re-test functionality of other components</li><li class="sc-jrsJWt dJdFwe">Use a single <code class="sc-crzoAE DykGo">expect</code> statement per test</li><li class="sc-jrsJWt dJdFwe">Accept unit testing UI components can be difficult</li><li class="sc-jrsJWt dJdFwe">Try use <code class="sc-crzoAE DykGo">screen.getByRole</code></li><li class="sc-jrsJWt dJdFwe">Isolate complex component logic, and test separately</li></ul><p class="sc-fujyAs eysHZq">For each guideline I go into greater detail using this Counter component as an example for our testing purposes:</p><pre style='color:#657b83;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;overflow-wrap:normal;line-height:1.5;tab-size:4;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em;background-color:#fdf6e3'><code style="font-size:1rem;max-height:400px;display:block;white-space:pre-wrap"><span><span class="token token" style="color:#859900">const</span><span> </span><span class="token token function-variable" style="color:#b58900">Counter</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token parameter" style="color:#586e75">{</span><span class="token token parameter"> initialCount</span><span class="token token parameter" style="color:#586e75">,</span><span class="token token parameter"> steps </span><span class="token token parameter" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>    </span><span class="token token" style="color:#859900">const</span><span> </span><span class="token token" style="color:#586e75">[</span><span class="token token" style="color:#586e75">{</span><span> count</span><span class="token token" style="color:#586e75">,</span><span> action </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">,</span><span> setCount</span><span class="token token" style="color:#586e75">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color:#b58900">useState</span><span class="token token" style="color:#586e75">(</span><span>initialCount</span><span class="token token" style="color:#586e75">,</span><span> action</span><span class="token token operator">:</span><span> </span><span class="token token" style="color:#859900">null</span><span> </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>
</span><span><span>    </span><span class="token token" style="color:#859900">const</span><span> </span><span class="token token function-variable" style="color:#b58900">increment</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>        </span><span class="token token" style="color:#b58900">setCount</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">(</span><span class="token token parameter" style="color:#586e75">{</span><span class="token token parameter">count </span><span class="token token parameter" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span> count</span><span class="token token operator">:</span><span> count </span><span class="token token operator">+</span><span> steps</span><span class="token token" style="color:#586e75">,</span><span> action</span><span class="token token operator">:</span><span> </span><span class="token token" style="color:#2aa198">"increment-click"</span><span> </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>
</span><span><span>    </span><span class="token token" style="color:#586e75">}</span><span>
</span></span><span>
</span><span><span>    </span><span class="token token" style="color:#859900">const</span><span> </span><span class="token token function-variable" style="color:#b58900">inputChange</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token parameter">e</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>        </span><span class="token token" style="color:#b58900">setCount</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">(</span><span class="token token parameter" style="color:#586e75">{</span><span class="token token parameter">count </span><span class="token token parameter" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span> count</span><span class="token token operator">:</span><span> e</span><span class="token token" style="color:#586e75">.</span><span>target</span><span class="token token" style="color:#586e75">.</span><span>value</span><span class="token token" style="color:#586e75">,</span><span> action</span><span class="token token operator">:</span><span> </span><span class="token token" style="color:#2aa198">"input-change"</span><span> </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>    </span><span class="token token" style="color:#586e75">}</span><span>
</span></span><span>
</span><span><span>    </span><span class="token token" style="color:#859900">return</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">&lt;</span><span class="token token" style="color:#586e75">></span><span class="token token plain-text">
</span></span><span><span class="token token plain-text">        </span><span class="token token" style="color:#586e75">&lt;</span><span class="token token" style="color:#268bd2">input</span><span class="token token" style="color:#268bd2"> </span><span class="token token" style="color:#2aa198">name</span><span class="token token attr-equals" style="color:#586e75">=</span><span class="token token" style="color:#586e75">"</span><span class="token token" style="color:#859900">counter</span><span class="token token" style="color:#586e75">"</span><span class="token token" style="color:#268bd2"> </span><span class="token token" style="color:#2aa198">value</span><span class="token token script language-javascript script-punctuation" style="color:#268bd2">=</span><span class="token token script language-javascript" style="color:#586e75">{</span><span class="token token script language-javascript" style="color:#268bd2">count</span><span class="token token script language-javascript" style="color:#586e75">}</span><span class="token token" style="color:#268bd2"> </span><span class="token token" style="color:#2aa198">onChange</span><span class="token token script language-javascript script-punctuation" style="color:#268bd2">=</span><span class="token token script language-javascript" style="color:#586e75">{</span><span class="token token script language-javascript" style="color:#268bd2">inputChange</span><span class="token token script language-javascript" style="color:#586e75">}</span><span class="token token" style="color:#268bd2"> </span><span class="token token" style="color:#586e75">/></span><span class="token token plain-text">
</span></span><span><span class="token token plain-text">        </span><span class="token token" style="color:#586e75">&lt;</span><span class="token token" style="color:#268bd2">button</span><span class="token token" style="color:#268bd2"> </span><span class="token token" style="color:#2aa198">onClick</span><span class="token token script language-javascript script-punctuation" style="color:#268bd2">=</span><span class="token token script language-javascript" style="color:#586e75">{</span><span class="token token script language-javascript" style="color:#268bd2">increment</span><span class="token token script language-javascript" style="color:#586e75">}</span><span class="token token" style="color:#586e75">></span><span class="token token plain-text">Increment</span><span class="token token" style="color:#586e75">&lt;/</span><span class="token token" style="color:#268bd2">button</span><span class="token token" style="color:#586e75">></span><span class="token token plain-text">
</span></span><span><span class="token token plain-text">        </span><span class="token token" style="color:#586e75">&lt;</span><span class="token token" style="color:#b58900">Tooltip</span><span class="token token" style="color:#586e75">></span><span class="token token plain-text">increments in steps of </span><span class="token token" style="color:#586e75">{</span><span>steps</span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">&lt;/</span><span class="token token" style="color:#b58900">Tooltip</span><span class="token token" style="color:#586e75">></span><span class="token token plain-text">
</span></span><span><span class="token token plain-text">    </span><span class="token token" style="color:#586e75">&lt;/</span><span class="token token" style="color:#586e75">></span><span>
</span></span><span><span>    </span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span></span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">;</span></span></code></pre></section><section><h2 class="sc-gKAaRy hydYaP">Group tests by render and user behaviours</h2><p class="sc-fujyAs eysHZq">Group tests into describe blocks named render and behaviours at the top level.</p><p>The main advantages of grouping the tests is to:</p><ul class="sc-pNWdM XJxhY"><li class="sc-jrsJWt dJdFwe">Provide clarity to the reviewer/collaborator on where to find or add a specific test case</li><li class="sc-jrsJWt dJdFwe">Prompt the initial test author(s) to include tests for the two main scenarios that need testing:<ul class="sc-pNWdM XJxhY"><li class="sc-jrsJWt dJdFwe">Assert on things that appear on render</li><li class="sc-jrsJWt dJdFwe">Assert on things that change after an user interaction</li></ul></li></ul><pre style='color:#657b83;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;overflow-wrap:normal;line-height:1.5;tab-size:4;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em;background-color:#fdf6e3'><code style="font-size:1rem;max-height:400px;display:block;white-space:pre-wrap"><span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"&lt;Counter />"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>    </span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"render"</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>        </span><span class="token token" style="color:#93a1a1">// include your tests for things that should happen on render</span><span>
</span></span><span><span>    </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>
</span><span><span>    </span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"behaviours"</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>        </span><span class="token token" style="color:#93a1a1">// include your tests for things that should happen after user interactions</span><span>
</span></span><span><span>    </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span></span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span></span></code></pre></section><section><h2 class="sc-gKAaRy hydYaP">Use a snapshot test to validate render</h2><p class="sc-fujyAs eysHZq">Snapshots are good for validating regressions when refactoring code and capturing changes to shared styled components. However snapshots have drawbacks, as they can:</p><ul class="sc-pNWdM XJxhY"><li class="sc-jrsJWt dJdFwe">Slow down the test suite</li><li class="sc-jrsJWt dJdFwe">Slow down the test suite</li><li class="sc-jrsJWt dJdFwe">Generate errors in multiple components when making a minor change to a single component.</li></ul><p class="sc-fujyAs eysHZq">As such the guidelines for using snapshot tests are as follows:</p><ul class="sc-pNWdM XJxhY"><li class="sc-jrsJWt dJdFwe">Generate at least 1 snapshot test per component on render to:<ul class="sc-pNWdM XJxhY"><li class="sc-jrsJWt dJdFwe">Validate shared styled-component changes that could affect this component.</li><li class="sc-jrsJWt dJdFwe">Validate any regressions when code refactoring.</li><li class="sc-jrsJWt dJdFwe">Mock child components to reduce time to produce snapshots and to reduce the triggering of errors when making changes to components. <strong class="sc-iqAclL jibPFy">(See section Don't be afraid to stub child components).</strong></li></ul></li><li class="sc-jrsJWt dJdFwe">Consider removing existing snapshots and generating new snapshots when making substantial changes to component functionality</li><li class="sc-jrsJWt dJdFwe">When refactoring a component you should use the <a class="sc-kEqXSa bAVzgZ" href="https://jestjs.io/docs/snapshot-testing#interactive-snapshot-mode" target="_blank">interactive update snapshot mode</a> to update and review any changes to snapshots.</li><li class="sc-jrsJWt dJdFwe">Closely review changes to snapshots in PRs as so not miss regressions</li></ul><pre style='color:#657b83;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;overflow-wrap:normal;line-height:1.5;tab-size:4;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em;background-color:#fdf6e3'><code style="font-size:1rem;max-height:400px;display:block;white-space:pre-wrap"><span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"&lt;Counter />"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>	</span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"render"</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>		</span><span class="token token" style="color:#b58900">it</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"SHOULD render"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>			</span><span class="token token" style="color:#859900">const</span><span> </span><span class="token token" style="color:#586e75">{</span><span> asFragment </span><span class="token token" style="color:#586e75">}</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color:#b58900">render</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">&lt;</span><span class="token token" style="color:#b58900">Counter</span><span class="token token" style="color:#268bd2"> </span><span class="token token" style="color:#586e75">/></span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>			</span><span class="token token" style="color:#b58900">expect</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#b58900">asFragment</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">toMatchSnapshot</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>		</span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>	</span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>
</span><span><span>	</span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"behaviours"</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>		</span><span class="token token" style="color:#93a1a1">// include your tests for things that should happen after user interactions*</span><span>
</span></span><span><span>	</span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>
</span><span><span></span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span></span></code></pre></section><section><h2 class="sc-gKAaRy hydYaP">Use GIVEN-WHEN-THEN to describe branching logic</h2><p class="sc-fujyAs eysHZq">The biggest improvement to our tests readability has been determining a consistent language and structure for our test descriptions – and for not a lot of effort! We found that using the<a class="sc-kEqXSa bAVzgZ" href="https://www.agilealliance.org/glossary/gwt" target="_blank">GIVEN-WHEN-THEN</a> structure works really well for describing component tests when using the `react-testing-library`.</p><p class="sc-fujyAs eysHZq"><strong class="sc-iqAclL jibPFy">GIVEN</strong> some context e.g. some component props, context, or state</p><p class="sc-fujyAs eysHZq"><strong class="sc-iqAclL jibPFy">WHEN</strong> some action is carried out e.g. a button is clicked or an user types in an input</p><p class="sc-fujyAs eysHZq"><strong class="sc-iqAclL jibPFy">THEN</strong> a particular set of observable set of consequences <strong class="sc-iqAclL jibPFy">SHOULD</strong> happen - e.g. some text has changed or no longer displays in the browser.</p><p class="sc-fujyAs eysHZq">We use GIVEN-WHEN-THEN in the following manner:</p><ul class="sc-pNWdM XJxhY"><li class="sc-jrsJWt dJdFwe">Write the keywords <code class="sc-crzoAE DykGo">GIVEN, WHEN, AND, NOT, SHOULD</code> in uppercase to make the structure easy to identify and read.</li><li class="sc-jrsJWt dJdFwe">Start with <code class="sc-crzoAE DykGo">GIVEN before WHEN</code></li><li class="sc-jrsJWt dJdFwe">Strict adherence is not required to the structure, focus should be placed on readability</li></ul><p class="sc-fujyAs eysHZq">You will notice the example below creates meaningful sentences that describes each test scenario e.g.</p><ul class="sc-pNWdM XJxhY"><li class="sc-jrsJWt dJdFwe"><code class="sc-crzoAE DykGo">&lt;Counter /></code> render GIVEN a initial count AND steps great than zero SHOULD display provided count</li><li class="sc-jrsJWt dJdFwe"><code class="sc-crzoAE DykGo">&lt;Counter /></code> behaviours WHEN a user clicks increase count button GIVEN steps SHOULD display provided count</li></ul><pre style='color:#657b83;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;overflow-wrap:normal;line-height:1.5;tab-size:4;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em;background-color:#fdf6e3'><code style="font-size:1rem;max-height:400px;display:block;white-space:pre-wrap"><span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"&lt;Counter />"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>    </span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"render"</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>        </span><span class="token token" style="color:#b58900">it</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"SHOULD render"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#93a1a1">// snapshot test</span><span>
</span></span><span><span>        </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>
</span><span><span>        </span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"GIVEN NO intial count"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"AND steps greater than 0"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#b58900">it</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"SHOULD display count zero"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>                    </span><span class="token token" style="color:#93a1a1">// ...</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>        </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>
</span><span><span>        </span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"GIVEN a initial count"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#b58900">it</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"SHOULD display provided count"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#93a1a1">// ...</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>
</span><span><span>            </span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"AND steps greater than 0"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#b58900">it</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"SHOULD display steps amount"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>                        </span><span class="token token" style="color:#93a1a1">// ...</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>
</span><span><span>            </span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"AND steps is 0"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#b58900">it</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"SHOULD NOT display counter"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>                    </span><span class="token token" style="color:#93a1a1">// ...</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#b58900">it</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"SHOULD THROW steps must be greater than 0 error"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>                    </span><span class="token token" style="color:#93a1a1">// ...</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>        </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>
</span><span><span>    </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>
</span><span><span>    </span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"behaviours"</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span>
</span><span><span>        </span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"WHEN a user clicks increase count button"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#b58900">it</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"SHOULD display incremented count"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>                    </span><span class="token token" style="color:#93a1a1">// ...</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>        </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>    
</span><span><span>        </span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"WHEN a user clicks increase count button multiple times"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#b58900">it</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"SHOULD display incremented count"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>                    </span><span class="token token" style="color:#93a1a1">// ...</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>        </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>
</span><span><span>        </span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"GIVEN steps"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"WHEN a user clicks increase count button"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#b58900">it</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"SHOULD display incremented count"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>                        </span><span class="token token" style="color:#93a1a1">// ...</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>        
</span><span><span>            </span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"WHEN a user clicks increase count button multiple times"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#b58900">it</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"SHOULD display incremented count"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>                        </span><span class="token token" style="color:#93a1a1">// ...</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>        </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>
</span><span><span>        </span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"GIVEN an initial count"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"WHEN a user clicks increase count button"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#b58900">it</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"SHOULD display incremented count"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>                        </span><span class="token token" style="color:#93a1a1">// ...</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>        
</span><span><span>            </span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"WHEN a user clicks increase count button multiple times"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#b58900">it</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"SHOULD display incremented count"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>                        </span><span class="token token" style="color:#93a1a1">// ...</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>        </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>
</span><span><span>    </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span></span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span></span></code></pre></section><section><h2 class="sc-gKAaRy hydYaP">Don't be afraid to stub child components</h2><figure class="sc-dIsUp jEEywD"><blockquote cite="https://martinfowler.com/articles/mocksArentStubs.html">Stubs provide canned answers to calls made during the test, usually not responding at all to anything outside what's programmed in for the test. Stubs may also record information about calls, such as an email gateway stub that remembers the messages it ‘sent’, or maybe only how many messages it ‘sent’.</blockquote><figcaption class="sc-bqGGPW iPexDg">— Martin Fowler<cite>, <a class="sc-kEqXSa bAVzgZ" href="https://martinfowler.com/articles/mocksArentStubs.html" target="_blank">Mocks arent Stubs</a></cite></figcaption></figure><p class="sc-fujyAs eysHZq">Stubs are described as Mocks in Jest. See this article <a class="sc-kEqXSa bAVzgZ" href="https://ericdcobb.medium.com/advanced-react-component-mocks-with-jest-and-react-testing-library-f1ae8838400b" target="_blank">Advanced React Component Mocks with Jest and React Testing Library</a> by Eric Cobb for details about how to use jest to stub components.</p><p class="sc-fujyAs eysHZq">These are unit tests and not integration tests. Stubbing out complex components can:</p><ul class="sc-pNWdM XJxhY"><li class="sc-jrsJWt dJdFwe">Reduce the amount of effort to write a test</li><li class="sc-jrsJWt dJdFwe">Increases the speed of snapshot testing</li><li class="sc-jrsJWt dJdFwe">Allow you to stub browser behaviours. Not all features of the browser of are emulated in <a class="sc-kEqXSa bAVzgZ" href="https://github.com/jsdom/jsdom" target="_blank">jsdom</a>, and in these scenarios it makes more sense to mock the child component or browser behaviour.</li></ul><p class="sc-fujyAs eysHZq">For example what if our counter example had a tooltip component within it. Usually tooltip components contain a lot of code and logic for figuring out where to position themselves on the page. Within our counter test, we don't care if the tooltip works – there should already be coverage in for this in our tooltip tests. In that case why let this component get in the way the counter tests or slow us down?</p><pre style='color:#657b83;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;overflow-wrap:normal;line-height:1.5;tab-size:4;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em;background-color:#fdf6e3'><code style="font-size:1rem;max-height:400px;display:block;white-space:pre-wrap"><span><span class="token token" style="color:#93a1a1">// Counter.jsx</span><span>
</span></span><span>
</span><span><span></span><span class="token token" style="color:#859900">import</span><span> </span><span class="token token" style="color:#586e75">{</span><span> Tooltip </span><span class="token token" style="color:#586e75">}</span><span> </span><span class="token token" style="color:#859900">from</span><span> </span><span class="token token" style="color:#2aa198">"./tooltip"</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>
</span><span><span></span><span class="token token" style="color:#859900">const</span><span> </span><span class="token token function-variable" style="color:#b58900">Counter</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token parameter" style="color:#586e75">{</span><span class="token token parameter"> initialCount</span><span class="token token parameter" style="color:#586e75">,</span><span class="token token parameter"> steps </span><span class="token token parameter" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>	</span><span class="token token" style="color:#859900">const</span><span> </span><span class="token token" style="color:#586e75">[</span><span>count</span><span class="token token" style="color:#586e75">,</span><span> setCount</span><span class="token token" style="color:#586e75">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color:#b58900">useState</span><span class="token token" style="color:#586e75">(</span><span>initialCount</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>	</span><span class="token token" style="color:#859900">const</span><span> </span><span class="token token function-variable" style="color:#b58900">increment</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#b58900">setCount</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">(</span><span class="token token parameter">count</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> count </span><span class="token token operator">+</span><span> steps</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>
</span><span><span>	</span><span class="token token" style="color:#859900">return</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">&lt;</span><span class="token token" style="color:#586e75">></span><span class="token token plain-text">
</span></span><span><span class="token token plain-text">		</span><span class="token token" style="color:#586e75">&lt;</span><span class="token token" style="color:#268bd2">input</span><span class="token token" style="color:#268bd2"> </span><span class="token token" style="color:#2aa198">name</span><span class="token token attr-equals" style="color:#586e75">=</span><span class="token token" style="color:#586e75">"</span><span class="token token" style="color:#859900">counter</span><span class="token token" style="color:#586e75">"</span><span class="token token" style="color:#268bd2"> </span><span class="token token" style="color:#2aa198">value</span><span class="token token script language-javascript script-punctuation" style="color:#268bd2">=</span><span class="token token script language-javascript" style="color:#586e75">{</span><span class="token token script language-javascript" style="color:#268bd2">count</span><span class="token token script language-javascript" style="color:#586e75">}</span><span class="token token" style="color:#268bd2"> </span><span class="token token" style="color:#586e75">/></span><span class="token token plain-text">
</span></span><span><span class="token token plain-text">		</span><span class="token token" style="color:#586e75">&lt;</span><span class="token token" style="color:#268bd2">button</span><span class="token token" style="color:#268bd2"> </span><span class="token token" style="color:#2aa198">onClick</span><span class="token token script language-javascript script-punctuation" style="color:#268bd2">=</span><span class="token token script language-javascript" style="color:#586e75">{</span><span class="token token script language-javascript" style="color:#268bd2">increment</span><span class="token token script language-javascript" style="color:#586e75">}</span><span class="token token" style="color:#586e75">></span><span class="token token plain-text">Increment</span><span class="token token" style="color:#586e75">&lt;/</span><span class="token token" style="color:#268bd2">button</span><span class="token token" style="color:#586e75">></span><span class="token token plain-text">
</span></span><span><span class="token token plain-text">		</span><span class="token token" style="color:#586e75">&lt;</span><span class="token token" style="color:#b58900">Tooltip</span><span class="token token" style="color:#586e75">></span><span class="token token plain-text">increments in steps of </span><span class="token token" style="color:#586e75">{</span><span>steps</span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">&lt;/</span><span class="token token" style="color:#b58900">Tooltip</span><span class="token token" style="color:#586e75">></span><span class="token token plain-text">
</span></span><span><span class="token token plain-text">	</span><span class="token token" style="color:#586e75">&lt;/</span><span class="token token" style="color:#586e75">></span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span></span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>
</span><span><span></span><span class="token token" style="color:#93a1a1">// Counter.spec.jsx</span><span>
</span></span><span>
</span><span><span>jest</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">mock</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"./tooltip"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>	</span><span class="token token function-variable" style="color:#b58900">Tooltip</span><span class="token token operator">:</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token parameter" style="color:#586e75">{</span><span class="token token parameter"> children </span><span class="token token parameter" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">&lt;</span><span class="token token" style="color:#586e75">></span><span class="token token" style="color:#586e75">{</span><span>children</span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">&lt;/</span><span class="token token" style="color:#586e75">></span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span></span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span></span></code></pre></section><section><h2 class="sc-gKAaRy hydYaP">Don't re-test functionality of child components</h2><p class="sc-fujyAs eysHZq">Referring back to our previous counter component example, we avoid testing that the tooltip works in the context of the counter component. We expect that the tooltip already has coverage in its own tests, and it usage within the counter component is only considered plumbing or configuration, which can just be validated by a developer, or in a code review.</p><p class="sc-fujyAs eysHZq">e.g. We do not test the following:</p><pre style='color:#657b83;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;overflow-wrap:normal;line-height:1.5;tab-size:4;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em;background-color:#fdf6e3'><code style="font-size:1rem;max-height:400px;display:block;white-space:pre-wrap"><span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"&lt;Counter />"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>		</span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"behaviours"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>			</span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"WHEN user mouseovers tooltip"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>				</span><span class="token token" style="color:#93a1a1">// AVOID TESTING THIS!</span><span>
</span></span><span><span>				</span><span class="token token" style="color:#b58900">it</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"SHOULD display tooltip text"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>        </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>      </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>		</span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span></span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span></span></code></pre></section><section><h2 class="sc-gKAaRy hydYaP">Use a single expect per test</h2><ul class="sc-pNWdM XJxhY"><li class="sc-jrsJWt dJdFwe">It's easier to debug failing tests</li><li class="sc-jrsJWt dJdFwe">The test case is easier to read and understand what it is testing for</li></ul><pre style='color:#657b83;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;overflow-wrap:normal;line-height:1.5;tab-size:4;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em;background-color:#fdf6e3'><code style="font-size:1rem;max-height:400px;display:block;white-space:pre-wrap"><span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"&lt;Counter />"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>	</span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"behaviours"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>        </span><span class="token token" style="color:#93a1a1">// AVOID THIS</span><span>
</span></span><span><span>		</span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"WHEN user clicks increment"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#b58900">it</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"SHOULD display incremented value for each click by defined steps"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#b58900">render</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">&lt;</span><span class="token token" style="color:#b58900">Counter</span><span class="token token" style="color:#268bd2"> </span><span class="token token" style="color:#2aa198">steps</span><span class="token token script language-javascript script-punctuation" style="color:#268bd2">=</span><span class="token token script language-javascript" style="color:#586e75">{</span><span class="token token script language-javascript" style="color:#268bd2">5</span><span class="token token script language-javascript" style="color:#586e75">}</span><span class="token token" style="color:#268bd2"> </span><span class="token token" style="color:#2aa198">intialCount</span><span class="token token script language-javascript script-punctuation" style="color:#268bd2">=</span><span class="token token script language-javascript" style="color:#586e75">{</span><span class="token token script language-javascript" style="color:#268bd2">0</span><span class="token token script language-javascript" style="color:#586e75">}</span><span class="token token" style="color:#586e75">/></span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#859900">const</span><span> incrementButton </span><span class="token token operator">=</span><span> screen</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">getByRole</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">'button'</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">{</span><span> name</span><span class="token token operator">:</span><span> </span><span class="token token" style="color:#2aa198">'increment'</span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>                userEvent</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">click</span><span class="token token" style="color:#586e75">(</span><span>incrementButton</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#859900">const</span><span> counter </span><span class="token token operator">=</span><span> screen</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">getByRole</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">'textarea'</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">{</span><span> name</span><span class="token token operator">:</span><span> </span><span class="token token" style="color:#2aa198">'counter'</span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span>
</span></span><span>
</span><span><span>                </span><span class="token token" style="color:#b58900">expect</span><span class="token token" style="color:#586e75">(</span><span>counter</span><span class="token token" style="color:#586e75">.</span><span>value</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">toBe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#268bd2">5</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>
</span><span><span>                userEvent</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">click</span><span class="token token" style="color:#586e75">(</span><span>incrementButton</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#b58900">expect</span><span class="token token" style="color:#586e75">(</span><span>counter</span><span class="token token" style="color:#586e75">.</span><span>value</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">toBe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#268bd2">10</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>
</span><span><span>                            userEvent</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">click</span><span class="token token" style="color:#586e75">(</span><span>incrementButton</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#b58900">expect</span><span class="token token" style="color:#586e75">(</span><span>counter</span><span class="token token" style="color:#586e75">.</span><span>value</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">toBe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#268bd2">15</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>        
</span><span><span>        </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>
</span><span><span>        </span><span class="token token" style="color:#93a1a1">// PREFER THIS</span><span>
</span></span><span><span>        </span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"WHEN user clicks increment"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#b58900">it</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"SHOULD display incremented value by defined steps"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#b58900">render</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">&lt;</span><span class="token token" style="color:#b58900">Counter</span><span class="token token" style="color:#268bd2"> </span><span class="token token" style="color:#2aa198">steps</span><span class="token token script language-javascript script-punctuation" style="color:#268bd2">=</span><span class="token token script language-javascript" style="color:#586e75">{</span><span class="token token script language-javascript" style="color:#268bd2">5</span><span class="token token script language-javascript" style="color:#586e75">}</span><span class="token token" style="color:#268bd2"> </span><span class="token token" style="color:#2aa198">intialCount</span><span class="token token script language-javascript script-punctuation" style="color:#268bd2">=</span><span class="token token script language-javascript" style="color:#586e75">{</span><span class="token token script language-javascript" style="color:#268bd2">0</span><span class="token token script language-javascript" style="color:#586e75">}</span><span class="token token" style="color:#586e75">/></span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#859900">const</span><span> incrementButton </span><span class="token token operator">=</span><span> screen</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">getByRole</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">'button'</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">{</span><span> name</span><span class="token token operator">:</span><span> </span><span class="token token" style="color:#2aa198">'increment'</span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>                userEvent</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">click</span><span class="token token" style="color:#586e75">(</span><span>incrementButton</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#859900">const</span><span> counter </span><span class="token token operator">=</span><span> screen</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">getByRole</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">'textarea'</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">{</span><span> name</span><span class="token token operator">:</span><span> </span><span class="token token" style="color:#2aa198">'counter'</span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span>
</span></span><span>
</span><span><span>                </span><span class="token token" style="color:#b58900">expect</span><span class="token token" style="color:#586e75">(</span><span>counter</span><span class="token token" style="color:#586e75">.</span><span>value</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">toBe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#268bd2">5</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>        </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>
</span><span><span>        </span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"WHEN user clicks increment multiple times"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#b58900">it</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"SHOULD display incremented value by defined steps times clicks"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#b58900">render</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">&lt;</span><span class="token token" style="color:#b58900">Counter</span><span class="token token" style="color:#268bd2"> </span><span class="token token" style="color:#2aa198">steps</span><span class="token token script language-javascript script-punctuation" style="color:#268bd2">=</span><span class="token token script language-javascript" style="color:#586e75">{</span><span class="token token script language-javascript" style="color:#268bd2">5</span><span class="token token script language-javascript" style="color:#586e75">}</span><span class="token token" style="color:#268bd2"> </span><span class="token token" style="color:#2aa198">intialCount</span><span class="token token script language-javascript script-punctuation" style="color:#268bd2">=</span><span class="token token script language-javascript" style="color:#586e75">{</span><span class="token token script language-javascript" style="color:#268bd2">0</span><span class="token token script language-javascript" style="color:#586e75">}</span><span class="token token" style="color:#586e75">/></span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#859900">const</span><span> incrementButton </span><span class="token token operator">=</span><span> screen</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">getByRole</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">'button'</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">{</span><span> name</span><span class="token token operator">:</span><span> </span><span class="token token" style="color:#2aa198">'increment'</span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>                userEvent</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">click</span><span class="token token" style="color:#586e75">(</span><span>incrementButton</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#859900">const</span><span> counter </span><span class="token token operator">=</span><span> screen</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">getByRole</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">'textarea'</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">{</span><span> name</span><span class="token token operator">:</span><span> </span><span class="token token" style="color:#2aa198">'counter'</span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span>
</span></span><span><span>                userEvent</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">click</span><span class="token token" style="color:#586e75">(</span><span>incrementButton</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>                userEvent</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">click</span><span class="token token" style="color:#586e75">(</span><span>incrementButton</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>                userEvent</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">click</span><span class="token token" style="color:#586e75">(</span><span>incrementButton</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>
</span><span><span>                </span><span class="token token" style="color:#b58900">expect</span><span class="token token" style="color:#586e75">(</span><span>counter</span><span class="token token" style="color:#586e75">.</span><span>value</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">toBe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#268bd2">15</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>        </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>    </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span></span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span></span></code></pre></section><section><h2 class="sc-gKAaRy hydYaP">Accept unit testing UI components can be difficult</h2><p class="sc-fujyAs eysHZq">The <a class="sc-kEqXSa bAVzgZ" href="https://testing-library.com/docs/react-testing-library/intro/" target="_blank">react-test-library</a> is limited by the functionality provided by <a class="sc-kEqXSa bAVzgZ" href="https://github.com/jsdom/jsdom" target="_blank">js-dom</a> where not all all browser APIs are emulated, making it hard to test. Things usually difficult to test are:</p><ul class="sc-pNWdM XJxhY"><li class="sc-jrsJWt dJdFwe">User scrolling within areas of the page. e.g. A common example of this is browser scrolling, for example, testing that data is loaded when a user scrolls past a threshold.</li></ul><p class="sc-fujyAs eysHZq">When writing a particular test becomes too difficult, we should consider the following:</p><ul class="sc-pNWdM XJxhY"><li class="sc-jrsJWt dJdFwe">You may be testing for the wrong thing. e.g. Are you testing child components like in the tooltip example above?</li><li class="sc-jrsJWt dJdFwe">Your component may be doing too much e.g. Is your component handling the retrieving of data from an API, rendering a list and calculating the printing out of pagination? If your component is doing more than 2-3 things you should consider splitting your component out into smaller components or hooks.</li><li class="sc-jrsJWt dJdFwe">Is there another way you could test this? Could I write a simpler test?<ul class="sc-pNWdM XJxhY"><li class="sc-jrsJWt dJdFwe">What would it mean if you didn't have this test and there was an error in this part of the code?</li><li class="sc-jrsJWt dJdFwe">Is there another way you could test this? e.g Could I write a simpler.</li><li class="sc-jrsJWt dJdFwe">Is there another way you could test this? Could I write a simpler test?<pre style='color:#657b83;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;overflow-wrap:normal;line-height:1.5;tab-size:4;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em;background-color:#fdf6e3'><code style="font-size:1rem;max-height:400px;display:block;white-space:pre-wrap"><span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"WHEN user scrolls to bottom of page"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>	</span><span class="token token" style="color:#93a1a1">// TODO: Figure out how to test this</span><span>
</span></span><span><span>	it</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">skip</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"SHOULD load more results"</span><span class="token token" style="color:#586e75">)</span><span> 
</span></span><span><span></span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span></span></code></pre></li></ul></li></ul></section><section><h2 class="sc-gKAaRy hydYaP">Try use <code class="sc-crzoAE DykGo">getByRole</code></h2><p class="sc-fujyAs eysHZq">If you familiarise yourself with the testing libraries documentation on <a class="sc-kEqXSa bAVzgZ" href="https://testing-library.com/docs/queries/about/#priority" target="_blank">priority of queries</a> you will notice that the first query suggested to utilise is <code class="sc-crzoAE DykGo">getByRole</code>.</p><p class="sc-fujyAs eysHZq">For the majority of user behaviours, there is a way to use <code class="sc-crzoAE DykGo">getByRole</code>. to find the element to interact with. The ability to query an element using <code class="sc-crzoAE DykGo">getByRole</code>. means it will very likely be accessible and visible to screen readers.</p><p class="sc-fujyAs eysHZq">I recommend reviewing the <a class="sc-kEqXSa bAVzgZ" href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles" target="_blank">MDN docs for ARIA Roles</a> to figure out the best way to add the correct roles to your interactive elements so that<code class="sc-crzoAE DykGo">getByRole</code>. can be used.</p><p class="sc-fujyAs eysHZq">For example for a <code class="sc-crzoAE DykGo">button</code> element you can use the attribute <code class="sc-crzoAE DykGo">aria-pressed="true"</code> to represent a button is active or inactive.</p><p class="sc-fujyAs eysHZq">I will use the example of a <code class="sc-crzoAE DykGo">ToggleButton</code> that can either be on or off to show how we can now test a button's active state using <code class="sc-crzoAE DykGo">getByRole</code>.</p><pre style='color:#657b83;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;overflow-wrap:normal;line-height:1.5;tab-size:4;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em;background-color:#fdf6e3'><code style="font-size:1rem;max-height:400px;display:block;white-space:pre-wrap"><span><span class="token token" style="color:#93a1a1">// ToggleButton.js</span><span>
</span></span><span><span></span><span class="token token" style="color:#859900">const</span><span> </span><span class="token token function-variable" style="color:#b58900">ToggleButton</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token parameter" style="color:#586e75">{</span><span class="token token parameter">intialActive</span><span class="token token parameter" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>    </span><span class="token token" style="color:#859900">const</span><span> </span><span class="token token" style="color:#586e75">[</span><span>isActive</span><span class="token token" style="color:#586e75">,</span><span> setActive</span><span class="token token" style="color:#586e75">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color:#b58900">useState</span><span class="token token" style="color:#586e75">(</span><span>intialActive</span><span class="token token" style="color:#586e75">)</span><span>
</span></span><span><span>    </span><span class="token token" style="color:#859900">return</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">&lt;</span><span class="token token" style="color:#268bd2">button</span><span class="token token" style="color:#268bd2"> </span><span class="token token" style="color:#2aa198">aria-pressed</span><span class="token token script language-javascript script-punctuation" style="color:#268bd2">=</span><span class="token token script language-javascript" style="color:#586e75">{</span><span class="token token script language-javascript" style="color:#268bd2">isActive</span><span class="token token script language-javascript" style="color:#586e75">}</span><span class="token token" style="color:#586e75">></span><span class="token token" style="color:#586e75">{</span><span> isActive</span><span class="token token operator">?</span><span> </span><span class="token token" style="color:#2aa198">'On'</span><span class="token token operator">:</span><span> </span><span class="token token" style="color:#2aa198">'Off'</span><span> </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">&lt;/</span><span class="token token" style="color:#268bd2">button</span><span class="token token" style="color:#586e75">></span><span>
</span></span><span><span></span><span class="token token" style="color:#586e75">}</span><span>
</span></span><span>
</span><span><span>OnOffSwitch</span><span class="token token" style="color:#586e75">.</span><span>defaultProps </span><span class="token token operator">=</span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>    intialActive</span><span class="token token" style="color:#586e75">;</span><span> </span><span class="token token" style="color:#268bd2">false</span><span>
</span></span><span><span></span><span class="token token" style="color:#586e75">}</span><span>
</span></span><span>
</span><span><span></span><span class="token token" style="color:#93a1a1">// ToggleButton.spec.js</span><span>
</span></span><span><span></span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"&lt;ToggleButton />"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>	</span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"behaviours"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>     </span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"GIVEN button is toggled off"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>        </span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"WHEN user clicks toggle button"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#b58900">it</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"SHOULD set button state inactive"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#b58900">render</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">&lt;</span><span class="token token" style="color:#b58900">ToggleBtn</span><span class="token token" style="color:#268bd2"> </span><span class="token token" style="color:#586e75">/></span><span class="token token" style="color:#586e75">)</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#859900">const</span><span> toggle </span><span class="token token operator">=</span><span> screen</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">getByRole</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">'button'</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">{</span><span> name</span><span class="token token operator">:</span><span> </span><span class="token token regex-delimiter" style="color:#cb4b16">/</span><span class="token token regex-source language-regex" style="color:#cb4b16">off</span><span class="token token regex-delimiter" style="color:#cb4b16">/</span><span class="token token regex-flags" style="color:#cb4b16">i</span><span class="token token" style="color:#586e75">,</span><span> pressed</span><span class="token token operator">:</span><span> </span><span class="token token" style="color:#268bd2">false</span><span> </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>                userEvent</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">click</span><span class="token token" style="color:#586e75">(</span><span>toggle</span><span class="token token" style="color:#586e75">)</span><span>
</span></span><span><span>                </span><span class="token token" style="color:#859900">const</span><span> activeToggle </span><span class="token token operator">=</span><span> screen</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">getByRole</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">'button'</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">{</span><span> name</span><span class="token token operator">:</span><span> </span><span class="token token regex-delimiter" style="color:#cb4b16">/</span><span class="token token regex-source language-regex" style="color:#cb4b16">on</span><span class="token token regex-delimiter" style="color:#cb4b16">/</span><span class="token token regex-flags" style="color:#cb4b16">i</span><span class="token token" style="color:#586e75">,</span><span> pressed</span><span class="token token operator">:</span><span> </span><span class="token token" style="color:#268bd2">true</span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>
</span><span><span>                </span><span class="token token" style="color:#b58900">expect</span><span class="token token" style="color:#586e75">(</span><span>activeToggle</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">toBeInTheDocument</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>        </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>     </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>  </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span></span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span></span></code></pre></section><section><h2 class="sc-gKAaRy hydYaP">Isolate complex component logic into a hooks and helper functions and test separately</h2><p class="sc-fujyAs eysHZq">In the counter component example, if we wanted to add a feature that allows users to provide their own value using keyboard input, this would require more logic to be added into our component.</p><p class="sc-fujyAs eysHZq">Adding more logic will increase the amount of tests and responsibilities for that component. By refactoring some of the logic into a <code class="sc-crzoAE DykGo">useCounter</code> hook, we can split out the responsibility and make things easier to test.</p><p class="sc-fujyAs eysHZq">The refactored counter component and <code class="sc-crzoAE DykGo">useCounter</code> hook</p><pre style='color:#657b83;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;overflow-wrap:normal;line-height:1.5;tab-size:4;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em;background-color:#fdf6e3'><code style="font-size:1rem;max-height:400px;display:block;white-space:pre-wrap"><span><span class="token token" style="color:#93a1a1">// useCounter.js</span><span>
</span></span><span><span></span><span class="token token" style="color:#859900">export</span><span> </span><span class="token token" style="color:#859900">const</span><span> </span><span class="token token function-variable" style="color:#b58900">useCounter</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token parameter">initialCount</span><span class="token token parameter" style="color:#586e75">,</span><span class="token token parameter"> steps</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span>
</span><span><span>	</span><span class="token token" style="color:#859900">const</span><span> </span><span class="token token" style="color:#586e75">[</span><span>count</span><span class="token token" style="color:#586e75">,</span><span> setCount</span><span class="token token" style="color:#586e75">]</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color:#b58900">useState</span><span class="token token" style="color:#586e75">(</span><span>initialCount</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>	
</span><span><span>	</span><span class="token token" style="color:#859900">const</span><span> </span><span class="token token function-variable" style="color:#b58900">increment</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>		</span><span class="token token" style="color:#b58900">setCount</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">(</span><span class="token token parameter" style="color:#586e75">{</span><span class="token token parameter">count </span><span class="token token parameter" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> count </span><span class="token token operator">+</span><span> steps</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>	</span><span class="token token" style="color:#586e75">}</span><span>
</span></span><span>
</span><span><span>	</span><span class="token token" style="color:#859900">return</span><span> </span><span class="token token" style="color:#586e75">{</span><span> count</span><span class="token token" style="color:#586e75">,</span><span> increment</span><span class="token token" style="color:#586e75">,</span><span> setCount  </span><span class="token token" style="color:#586e75">}</span><span>
</span></span><span><span></span><span class="token token" style="color:#586e75">}</span><span>
</span></span><span>
</span><span><span></span><span class="token token" style="color:#93a1a1">// Counter.js</span><span>
</span></span><span><span></span><span class="token token" style="color:#859900">export</span><span> </span><span class="token token" style="color:#859900">const</span><span> </span><span class="token token function-variable" style="color:#b58900">Counter</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token parameter" style="color:#586e75">{</span><span class="token token parameter"> initialCount</span><span class="token token parameter" style="color:#586e75">,</span><span class="token token parameter"> steps </span><span class="token token parameter" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span>
</span><span><span>	</span><span class="token token" style="color:#859900">const</span><span> </span><span class="token token" style="color:#586e75">{</span><span> count</span><span class="token token" style="color:#586e75">,</span><span> increment</span><span class="token token" style="color:#586e75">,</span><span> setCount </span><span class="token token" style="color:#586e75">}</span><span> </span><span class="token token operator">=</span><span>  </span><span class="token token" style="color:#b58900">useCounter</span><span class="token token" style="color:#586e75">(</span><span>initialCount</span><span class="token token" style="color:#586e75">,</span><span> steps </span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>
</span><span><span>	</span><span class="token token" style="color:#859900">return</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">&lt;</span><span class="token token" style="color:#586e75">></span><span class="token token plain-text">
</span></span><span><span class="token token plain-text">		</span><span class="token token" style="color:#586e75">&lt;</span><span class="token token" style="color:#268bd2">input</span><span class="token token" style="color:#268bd2"> </span><span class="token token" style="color:#2aa198">name</span><span class="token token attr-equals" style="color:#586e75">=</span><span class="token token" style="color:#586e75">"</span><span class="token token" style="color:#859900">counter</span><span class="token token" style="color:#586e75">"</span><span class="token token" style="color:#268bd2"> </span><span class="token token" style="color:#2aa198">value</span><span class="token token script language-javascript script-punctuation" style="color:#268bd2">=</span><span class="token token script language-javascript" style="color:#586e75">{</span><span class="token token script language-javascript" style="color:#268bd2">count</span><span class="token token script language-javascript" style="color:#586e75">}</span><span class="token token" style="color:#268bd2"> </span><span class="token token" style="color:#2aa198">onChange</span><span class="token token script language-javascript script-punctuation" style="color:#268bd2">=</span><span class="token token script language-javascript" style="color:#586e75">{</span><span class="token token script language-javascript" style="color:#586e75">(</span><span class="token token script language-javascript parameter" style="color:#268bd2">e</span><span class="token token script language-javascript" style="color:#586e75">)</span><span class="token token script language-javascript" style="color:#268bd2"> </span><span class="token token script language-javascript operator" style="color:#268bd2">=></span><span class="token token script language-javascript" style="color:#268bd2"> </span><span class="token token script language-javascript" style="color:#b58900">setCount</span><span class="token token script language-javascript" style="color:#586e75">(</span><span class="token token script language-javascript" style="color:#268bd2">e</span><span class="token token script language-javascript" style="color:#586e75">.</span><span class="token token script language-javascript" style="color:#268bd2">target</span><span class="token token script language-javascript" style="color:#586e75">.</span><span class="token token script language-javascript" style="color:#268bd2">value</span><span class="token token script language-javascript" style="color:#586e75">)</span><span class="token token script language-javascript" style="color:#586e75">}</span><span class="token token" style="color:#268bd2"> </span><span class="token token" style="color:#586e75">/></span><span class="token token plain-text">
</span></span><span><span class="token token plain-text">		</span><span class="token token" style="color:#586e75">&lt;</span><span class="token token" style="color:#268bd2">button</span><span class="token token" style="color:#268bd2"> </span><span class="token token" style="color:#2aa198">onClick</span><span class="token token script language-javascript script-punctuation" style="color:#268bd2">=</span><span class="token token script language-javascript" style="color:#586e75">{</span><span class="token token script language-javascript" style="color:#268bd2">increment</span><span class="token token script language-javascript" style="color:#586e75">}</span><span class="token token" style="color:#586e75">></span><span class="token token plain-text">Increment</span><span class="token token" style="color:#586e75">&lt;/</span><span class="token token" style="color:#268bd2">button</span><span class="token token" style="color:#586e75">></span><span class="token token plain-text">
</span></span><span><span class="token token plain-text">		</span><span class="token token" style="color:#586e75">&lt;</span><span class="token token" style="color:#b58900">Tooltip</span><span class="token token" style="color:#586e75">></span><span class="token token plain-text">increments in steps of </span><span class="token token" style="color:#586e75">{</span><span>steps</span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">&lt;/</span><span class="token token" style="color:#b58900">Tooltip</span><span class="token token" style="color:#586e75">></span><span class="token token plain-text">
</span></span><span><span class="token token plain-text">	</span><span class="token token" style="color:#586e75">&lt;/</span><span class="token token" style="color:#586e75">></span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span></span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">;</span></span></code></pre><p class="sc-fujyAs eysHZq">The updated tests</p><pre style='color:#657b83;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;overflow-wrap:normal;line-height:1.5;tab-size:4;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em;background-color:#fdf6e3'><code style="font-size:1rem;max-height:400px;display:block;white-space:pre-wrap"><span><span class="token token" style="color:#93a1a1">// useCounter.spec.js</span><span>
</span></span><span><span></span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"useCounter"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>    </span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"GIVEN intialCount AND steps"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>        </span><span class="token token" style="color:#b58900">it</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"SHOULD set count to intialCount"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#859900">const</span><span> </span><span class="token token" style="color:#586e75">{</span><span> result </span><span class="token token" style="color:#586e75">}</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color:#b58900">renderHook</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#b58900">useCounter</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">{</span><span> intialCount</span><span class="token token operator">:</span><span> </span><span class="token token" style="color:#268bd2">5</span><span class="token token" style="color:#586e75">,</span><span> steps</span><span class="token token operator">:</span><span> </span><span class="token token" style="color:#268bd2">10</span><span> </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">)</span><span>
</span></span><span>
</span><span><span>            </span><span class="token token" style="color:#b58900">expect</span><span class="token token" style="color:#586e75">(</span><span>result</span><span class="token token" style="color:#586e75">.</span><span>current</span><span class="token token" style="color:#586e75">.</span><span>count</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">toBe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#268bd2">5</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>        </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>
</span><span><span>    </span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"GIVEN increment()"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>	    </span><span class="token token" style="color:#b58900">it</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"SHOULD increase count by steps"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>	        </span><span class="token token" style="color:#859900">const</span><span> </span><span class="token token" style="color:#586e75">{</span><span> result </span><span class="token token" style="color:#586e75">}</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color:#b58900">renderHook</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#b58900">useCounter</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">{</span><span> intialCount</span><span class="token token operator">:</span><span> </span><span class="token token" style="color:#268bd2">5</span><span class="token token" style="color:#586e75">,</span><span> steps</span><span class="token token operator">:</span><span> </span><span class="token token" style="color:#268bd2">10</span><span> </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">)</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#b58900">act</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>            result</span><span class="token token" style="color:#586e75">.</span><span>current</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">increment</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#b58900">expect</span><span class="token token" style="color:#586e75">(</span><span>result</span><span class="token token" style="color:#586e75">.</span><span>current</span><span class="token token" style="color:#586e75">.</span><span>count</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">toBe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#268bd2">15</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>        </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>    </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>
</span><span><span>    </span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"GIVEN setCount() with new value"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>        </span><span class="token token" style="color:#b58900">it</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"SHOULD update count value"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#859900">const</span><span> </span><span class="token token" style="color:#586e75">{</span><span> result </span><span class="token token" style="color:#586e75">}</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color:#b58900">renderHook</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#b58900">useCounter</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">{</span><span> intialCount</span><span class="token token operator">:</span><span> </span><span class="token token" style="color:#268bd2">5</span><span class="token token" style="color:#586e75">,</span><span> steps</span><span class="token token operator">:</span><span> </span><span class="token token" style="color:#268bd2">10</span><span> </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">)</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#b58900">act</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>            result</span><span class="token token" style="color:#586e75">.</span><span>current</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">setCount</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#268bd2">20</span><span class="token token" style="color:#586e75">)</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#b58900">expect</span><span class="token token" style="color:#586e75">(</span><span>result</span><span class="token token" style="color:#586e75">.</span><span>current</span><span class="token token" style="color:#586e75">.</span><span>count</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">toBe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#268bd2">20</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>        </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>	</span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span></span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>
</span><span><span></span><span class="token token" style="color:#93a1a1">// Counter.spec.js</span><span>
</span></span><span><span></span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"&lt;Counter />"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span>
</span><span><span>    </span><span class="token token" style="color:#b58900">describe</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"render"</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>        </span><span class="token token" style="color:#b58900">it</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#2aa198">"SHOULD render"</span><span class="token token" style="color:#586e75">,</span><span> </span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span> </span><span class="token token operator">=></span><span> </span><span class="token token" style="color:#586e75">{</span><span>
</span></span><span><span>            </span><span class="token token" style="color:#859900">const</span><span> </span><span class="token token" style="color:#586e75">{</span><span> asFragment </span><span class="token token" style="color:#586e75">}</span><span> </span><span class="token token operator">=</span><span>  </span><span class="token token" style="color:#b58900">render</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">&lt;</span><span class="token token" style="color:#b58900">Counter</span><span class="token token" style="color:#268bd2"> </span><span class="token token" style="color:#586e75">/></span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span>
</span><span><span>            </span><span class="token token" style="color:#b58900">expect</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#b58900">asFragment</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">.</span><span class="token token" style="color:#b58900">toMatchSnapshot</span><span class="token token" style="color:#586e75">(</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>        </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span>    </span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span><span>
</span></span><span><span></span><span class="token token" style="color:#586e75">}</span><span class="token token" style="color:#586e75">)</span><span class="token token" style="color:#586e75">;</span></span></code></pre></section><section><h2 class="sc-gKAaRy hydYaP">Conclusion</h2><p class="sc-fujyAs eysHZq">After following these guidelines we went from having a haphazard approach to writing and structuring UI tests, to having a clear and consistent method. There are many different ways to write, structure, and organise tests, and this is by no means the best or only approach, but one that worked for us.</p><p class="sc-fujyAs eysHZq">If you want to improve testing in your codebase you should consider agreeing on a set of guidelines that suits your team.</p></section></article></div></div><script>!function(e){function r(r){for(var n,i,a=r[0],c=r[1],l=r[2],s=0,p=[];s<a.length;s++)i=a[s],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(f&&f(r);p.length;)p.shift()();return u.push.apply(u,l||[]),t()}function t(){for(var e,r=0;r<u.length;r++){for(var t=u[r],n=!0,a=1;a<t.length;a++){var c=t[a];0!==o[c]&&(n=!1)}n&&(u.splice(r--,1),e=i(i.s=t[0]))}return e}var n={},o={1:0},u=[];function i(r){if(n[r])return n[r].exports;var t=n[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.e=function(e){var r=[],t=o[e];if(0!==t)if(t)r.push(t[2]);else{var n=new Promise((function(r,n){t=o[e]=[r,n]}));r.push(t[2]=n);var u,a=document.createElement("script");a.charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.src=function(e){return i.p+"static/js/"+({}[e]||e)+"."+{3:"6047f5e1"}[e]+".chunk.js"}(e);var c=new Error;u=function(r){a.onerror=a.onload=null,clearTimeout(l);var t=o[e];if(0!==t){if(t){var n=r&&("load"===r.type?"missing":r.type),u=r&&r.target&&r.target.src;c.message="Loading chunk "+e+" failed.\n("+n+": "+u+")",c.name="ChunkLoadError",c.type=n,c.request=u,t[1](c)}o[e]=void 0}};var l=setTimeout((function(){u({type:"timeout",target:a})}),12e4);a.onerror=a.onload=u,document.head.appendChild(a)}return Promise.all(r)},i.m=e,i.c=n,i.d=function(e,r,t){i.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,r){if(1&r&&(e=i(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)i.d(t,n,function(r){return e[r]}.bind(null,n));return t},i.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(r,"a",r),r},i.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},i.p="/blog/",i.oe=function(e){throw console.error(e),e};var a=this.webpackJsonpblog=this.webpackJsonpblog||[],c=a.push.bind(a);a.push=r,a=a.slice();for(var l=0;l<a.length;l++)r(a[l]);var f=c;t()}([])</script><script src="/blog/static/js/2.5a9de685.chunk.js"></script><script src="/blog/static/js/main.5eba68f4.chunk.js"></script></body></html>
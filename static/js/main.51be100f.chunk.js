(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{87:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var s,i,r,o,c,a,l=n(1),d=n(22),h=n(11),u=n(5),b=n(3),j=n(4),m="@media screen and (max-width: 599px)",g="@media screen and (min-width: 600px) and (max-width: 768px)",p="@media screen and (min-width: 769px)",O=n(0),x=j.a.header(s||(s=Object(b.a)(["\n    display: flex;\n    flex-direction: column;\n    padding: 4rem 2rem;\n    align-items: center;\n\n    "," {\n        padding: 1rem 0.5rem;\n    }\n"])),m),f=j.a.h1(i||(i=Object(b.a)(["\n    font-size: 3.5rem;\n    margin-bottom: 4rem;\n\n    "," {\n        font-size: 1.75rem;\n        margin-bottom: 1rem;\n    }\n"])),m),w=j.a.strong(r||(r=Object(b.a)(["\n    color: #000;\n    font-weight: 700;\n"]))),y=j.a.nav(o||(o=Object(b.a)(["\n    display: flex;\n    gap: 1rem;\n    justify-content: center;\n"]))),v=Object(j.a)(h.b)(c||(c=Object(b.a)(["\n    text-decoration: none;\n    text-transform: uppercase;\n    color: #95a1b1;\n"]))),k=function(){return Object(O.jsxs)(x,{children:[Object(O.jsxs)(f,{children:['() => "',Object(O.jsx)(w,{children:"Robert Prib"}),'"']}),Object(O.jsxs)(y,{children:[Object(O.jsx)(v,{to:"/blog",children:"Home"}),Object(O.jsx)(v,{to:"/blog/contact",children:"Contact"})]})]})},I=n(12),C=["title","titleId"];function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}function T(e,t){if(null==e)return{};var n,s,i=function(e,t){if(null==e)return{};var n,s,i={},r=Object.keys(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function S(e,t){var n=e.title,s=e.titleId,i=T(e,C);return l.createElement("svg",H({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",ref:t,"aria-labelledby":s},i),n?l.createElement("title",{id:s},n):null,a||(a=l.createElement("path",{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm64-192c0-8.8 7.2-16 16-16h96c8.8 0 16 7.2 16 16v96c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16v-96zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"})))}var E,N=l.forwardRef(S),R=(n.p,["title","titleId"]);function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}function D(e,t){if(null==e)return{};var n,s,i=function(e,t){if(null==e)return{};var n,s,i={},r=Object.keys(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function W(e,t){var n=e.title,s=e.titleId,i=D(e,R);return l.createElement("svg",B({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",ref:t,"aria-labelledby":s},i),n?l.createElement("title",{id:s},n):null,E||(E=l.createElement("path",{d:"M432 304c0 114.9-93.1 208-208 208S16 418.9 16 304c0-104 76.3-190.2 176-205.5V64h-28c-6.6 0-12-5.4-12-12V12c0-6.6 5.4-12 12-12h120c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-28v34.5c37.5 5.8 71.7 21.6 99.7 44.6l27.5-27.5c4.7-4.7 12.3-4.7 17 0l28.3 28.3c4.7 4.7 4.7 12.3 0 17l-29.4 29.4-.6.6C419.7 223.3 432 262.2 432 304zm-176 36V188.5c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12V340c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z"})))}var A,L,U,V,P,F,G,M,q,z,_,J,Y=l.forwardRef(W),Q=(n.p,n(92)),K=n(41),X=n(91);Q.a.registerLanguage("jsx",K.a);var Z,$,ee,te,ne,se,ie=j.a.h1(A||(A=Object(b.a)(["\n    font-size: 2.5rem;\n    font-weight: 700;\n    margin-bottom: 1.5rem;\n\n    > * {\n        color: #000;\n    }\n"]))),re=j.a.h2(L||(L=Object(b.a)(["\n    font-size: 2rem;\n    font-weight: 700;\n    margin-bottom: 1.5rem;\n"]))),oe=j.a.section(U||(U=Object(b.a)(["\n    color: #95a1b1;\n    fill: #95a1b1;\n    display: block;\n    margin-bottom: 1.25rem;\n"]))),ce=j.a.p(V||(V=Object(b.a)(["\n    margin-bottom: 1.25rem;\n    margin-top: 0.5rem;\n    text-align: left;\n"]))),ae=j.a.ul(P||(P=Object(b.a)(["\n    margin-bottom: 1.5rem;\n    text-align: left;\n"]))),le=j.a.li(F||(F=Object(b.a)(["\n    margin-bottom: 0.5rem;\n    margin-left: 1.5rem;\n    text-align: left;\n    list-style: disc;\n    list-style-position: inside;\n"]))),de=j.a.a(G||(G=Object(b.a)(["\n    color: #2379be;\n    text-decoration: underline;\n"]))),he=j.a.strong(M||(M=Object(b.a)(["\n    font-weight: 400;\n"]))),ue=function(e){var t=e.children;return Object(O.jsx)(Q.a,{language:"jsx",style:X.a,wrapLongLines:!0,codeTagProps:{style:{fontSize:"1rem",maxHeight:"400px",display:"block"}},children:t})},be=j.a.code(q||(q=Object(b.a)(["\n    color: #f55e00;\n    background-color: rgb(253, 246, 227);\n    border-radius: 0.1em;\n    padding: 0.5rem 0.5rem;\n    white-space: nowrap;\n"]))),je=j.a.figure(z||(z=Object(b.a)(["\n    padding-left: 1rem;\n    border-left: 10px solid #35fdbe;\n    font-style: italic;\n    font-size: 1rem;\n    font-weight: 400;\n"]))),me=j.a.figcaption(_||(_=Object(b.a)(["\n    font-weight: 300;\n"]))),ge=function(e){var t=e.children,n=e.source,s=e.citeContent,i=e.citeLink;return console.log(s),Object(O.jsxs)(je,{children:[Object(O.jsx)("blockquote",{cite:i,children:t}),(n||s)&&Object(O.jsxs)(me,{children:["\u2014 ",n,s&&Object(O.jsxs)("cite",{children:[","," ",i?Object(O.jsx)(de,{href:i,target:"_blank",children:s}):s]})]})]})},pe=j.a.i(J||(J=Object(b.a)(["\n    svg {\n        width: 1rem;\n    }\n"]))),Oe=function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(I.a,{children:[Object(O.jsx)("title",{children:"Here's what happened after publishing my first article | Robert Prib | Blog "}),Object(O.jsx)("meta",{name:"description",content:"What happened after sharing my content didn't follow the script I had envisioned. The results are not surprising. This post talks more about what happened."}),Object(O.jsx)("meta",{name:"og:title",content:"Here's what happened after publishing my first article | Robert Prib | Blog "}),Object(O.jsx)("meta",{name:"og:description",content:"What happened after sharing my content didn't follow the script I had envisioned. The results are not surprising. This post talks more about what happened."}),Object(O.jsx)("meta",{name:"og:url",content:"https://whassup.github.io/blog/article/how-our-team-writes-tests"}),Object(O.jsx)("meta",{name:"og:image",content:"https://whassup.github.io/blog/article/how-our-team-writes-tests"})]}),Object(O.jsx)(ie,{children:"Here's what happened after publishing my first article"}),Object(O.jsxs)(oe,{children:[Object(O.jsxs)("time",{children:[Object(O.jsx)(pe,{children:Object(O.jsx)(N,{})})," ","12 Agust 2021"]})," ",Object(O.jsxs)("span",{children:[Object(O.jsx)(pe,{children:Object(O.jsx)(Y,{})})," ","4 minute read"]})]}),Object(O.jsxs)("section",{children:[Object(O.jsxs)(ce,{children:["This year I published my first article"," ",Object(O.jsx)(de,{href:"https://whassup.github.io/blog/article/how-our-team-writes-tests/",children:'"How our team writes React tests and other stuff too"'}),". What happened after sharing my content didn't follow the script I had envisioned. The results are not surprising; here is what happened."]}),Object(O.jsxs)(ae,{children:[Object(O.jsx)(le,{children:Object(O.jsx)(de,{href:"#viewership",children:"Viewership was lower than I expected"})}),Object(O.jsx)(le,{children:Object(O.jsx)(de,{href:"#no-comments",children:"No one commented"})}),Object(O.jsx)(le,{children:Object(O.jsx)(de,{href:"#reddit",children:"Reddit removed my posts"})}),Object(O.jsx)(le,{children:Object(O.jsx)(de,{href:"#sharing",children:"Sharing this content was useful for myself"})}),Object(O.jsx)(le,{children:Object(O.jsx)(de,{href:"#insights",children:"I gained valuable insights"})}),Object(O.jsx)(le,{children:Object(O.jsx)(de,{href:"#more-to-learn",children:"There is a great deal more for me to learn about writing & publishing online"})})]})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)(re,{id:"viewership",children:"Viewership was lower than I expected"}),Object(O.jsx)(ce,{children:"I was very optimistic about the amount of engagement my article would get. I published on my own personal blog and then shared it on several networks over the course of a month. Networks I shared my article on were: work Slack, LinkedIn, Medium, Dev.to, Hacker News and Reddit."}),Object(O.jsx)(ge,{citeContent:"Sharing my article with my colleagues at work via Slack.",source:"Slack",children:Object(O.jsx)("img",{src:"/blog/slack-post-publishing-article.png",alt:"Sharing my article with my colleagues at work.",width:"100%"})}),Object(O.jsx)(ce,{children:"With each network I shared to I was hoping that I would slowly get more and more people viewing my content. All up my article received about 150~ unique views and out of those views probably less than half read it."}),Object(O.jsxs)(ce,{children:[" ","The majority those views came from"," ",Object(O.jsx)(de,{href:"http://dev.to",target:"_blank",children:"Dev.to"}),", my personal blog and LinkedIn, with little to no views from Hacker News and Reddit."]}),Object(O.jsx)(ge,{citeContent:"The amount of likes and views I received",source:"Dev.to",children:Object(O.jsx)("img",{src:"/blog/slack-post-publishing-article.png",alt:"The amount of likes and views I received from Dev.to",width:"100%"})}),Object(O.jsx)("br",{})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)(re,{id:"no-comments",children:"No one commented"}),Object(O.jsx)(ce,{children:"It was crushing not getting the viewership that I had anticipated; it was devastating to not to receive a single comment or question about the article. My main hope was this content would start a conversation around it's subject matter topic and not doing so felt like failure."}),Object(O.jsx)(ce,{children:"My partner Emily's advice on no one commenting was to relay some expertise on the matter provided from one of her favorite radio programs, &quote;The Taylor Strecker Show&quote;. Paraphrasing Emily whom was paraphrasing Taylor, &quote;most people who consume your content are in the silent majority and move on. The ones that have opposing opinions are generally the ones that comment&quote;."}),Object(O.jsx)(ce,{children:"The reality is I read a lot of valuable content online and I rarely comment on it and my guess most people are like me too in this regard. Whether people comment on a article is not important and neither does it represent the content as being good or bad."})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)(re,{id:"reddit",children:"Reddit removed my posts"}),Object(O.jsx)(ce,{children:"Reddit felt like it should of been the easiest place to share content to a large audience. I created myself a reddit account and then published to a few relevant communities such as r/react r/Frontend and r/JavaScript. To my surprise all my posts where taken down by moderator bots being flagged as spam."}),Object(O.jsx)(ce,{children:"It turns out my account is too new to share content. To post on most reddit communities you need first build karma points in that community by commenting and voting on other posts first."}),Object(O.jsx)(ge,{citeContent:"My removed post",source:"Reddit",children:Object(O.jsx)("img",{src:"/blog/slack-post-publishing-article.png",alt:"My removed post on Reddit",width:"100%"})})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)(re,{id:"sharing",children:"Sharing this content was useful for myself"}),Object(O.jsx)(ce,{children:"My article wasn't viewed by the masses and didn't generate any interesting debate however I found other usefulness in sharing this content. Writing this content was useful for myself to define what I understand about the subject matter and sharing it proofed to be a useful reference material for myself when bringing new people into my team."})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)(re,{id:"insights",children:"Sharing this content was useful for myself"}),Object(O.jsx)(ce,{children:"The real value generated from publishing my first article was the insights I garnered from the experience."}),Object(O.jsxs)(ce,{children:[Object(O.jsx)(he,{children:"Insight 1 -"})," I enjoy writing content and I should write and share more."]}),Object(O.jsxs)(ce,{children:[Object(O.jsx)(he,{children:"Insight 2 -"})," Producing content is my goal; views and engagement are merely side effects."]}),Object(O.jsxs)(ce,{children:[Object(O.jsx)(he,{children:"Insight 3 -"})," Each time I publish it will get easier as I discover more about how to publish to various networks and their limitations."]})," "]}),Object(O.jsxs)("section",{children:[Object(O.jsxs)(re,{id:"more-to-learn",children:["There is a great deal more for me to learn about writing & publishing online"," "]}),Object(O.jsx)(ce,{children:"For anyone reading this article I would love to know;"}),Object(O.jsxs)(ae,{children:[Object(O.jsx)(le,{children:"Where are you sharing your content?"}),Object(O.jsx)(le,{children:"How are you marketing your content?"}),Object(O.jsx)(le,{children:"How important is it to include a thumbnail with your article?"}),Object(O.jsx)(le,{children:"What have your experiences been like with sharing online?"})]})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)(re,{children:"Conclusion"}),Object(O.jsx)(ge,{citeContent:"Bird by Bird: Instructions on Writing and Life",source:"Anne Lamott",children:'"You are going to have to give and give and give, or there\'s no reason for you to be writing. You have to give from the deepest part of yourself, and you are going to have to go on giving, and the giving is going to have to be its own reward. There is no cosmic importance to your getting something published, but there is in learning to be a giver."'}),Object(O.jsx)(ce,{children:"My first article gave me experience with the writing and sharing content online. The views and engagement are not important they are just outcomes that can happen through the process of sharing content. Taking inspiration from Anne Lamott's comment on getting something published as writer I'm going to focus on the act of writing and sharing my content whether people are interested in it on or not."})]})]})},xe=function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(I.a,{children:[Object(O.jsx)("title",{children:"How our team writes React tests and other stuff too | Robert Prib | Blog "}),Object(O.jsx)("meta",{name:"description",content:"Write React tests that are easy to read, write and reduced wasted time on decisions."}),Object(O.jsx)("meta",{name:"og:title",content:"How our team writes React tests and other stuff too | Robert Prib | Blog "}),Object(O.jsx)("meta",{name:"og:description",content:"Write React tests that are easy to read, write and reduced wasted time on decisions."}),Object(O.jsx)("meta",{name:"og:url",content:"https://whassup.github.io/blog/article/how-our-team-writes-tests"}),Object(O.jsx)("meta",{name:"og:image",content:"https://whassup.github.io/blog/article/how-our-team-writes-tests"})]}),Object(O.jsx)(ie,{children:"How our team writes React tests and other stuff too"}),Object(O.jsxs)(oe,{children:[Object(O.jsxs)("time",{children:[Object(O.jsx)(pe,{children:Object(O.jsx)(N,{})})," ","5 June 2021"]})," ",Object(O.jsxs)("span",{children:[Object(O.jsx)(pe,{children:Object(O.jsx)(Y,{})})," ","8 minute read"]})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)(ce,{children:"Have you ever worked in a codebase where each test file was different to the next? Different terminology and grouping of test scenarios; different usages of snapshot testing and react-testing-library."}),Object(O.jsx)(ce,{children:"The effect of this meant wasted time reading a full test file to understand its structure before adding another test case. Creating new tests involved making multiple decisions; should I copy the structure of an existing test or create a new one? Should I use snapshot tests?"}),Object(O.jsx)(ce,{children:"We solved this problem by defining guidelines to follow, that make writing tests that are easy to read and write, and would reduced wasted time on decisions."}),Object(O.jsx)(ce,{children:"Our guidelines are as follows:"}),Object(O.jsxs)(ae,{children:[Object(O.jsx)(le,{children:"Group tests by render and user behaviours"}),Object(O.jsx)(le,{children:"Use a snapshot test to validate render"}),Object(O.jsx)(le,{children:"Use GIVEN-WHEN-THEN to describe branching logic"}),Object(O.jsxs)(le,{children:["Don't be afraid to stub child components"," ",Object(O.jsx)(de,{href:"https://ericdcobb.medium.com/advanced-react-component-mocks-with-jest-and-react-testing-library-f1ae8838400b",target:"_blank",children:"also know in Jest as mocking"})]}),Object(O.jsx)(le,{children:"Don't re-test functionality of other components"}),Object(O.jsxs)(le,{children:["Use a single ",Object(O.jsx)(be,{children:"expect"})," statement per test"]}),Object(O.jsx)(le,{children:"Accept unit testing UI components can be difficult"}),Object(O.jsxs)(le,{children:["Try use ",Object(O.jsx)(be,{children:"screen.getByRole"})]}),Object(O.jsx)(le,{children:"Isolate complex component logic, and test separately"})]}),Object(O.jsxs)(ce,{children:["For each guideline I go into greater detail using this Counter component as an example for our testing purposes:"," "]}),Object(O.jsx)(ue,{children:'const Counter = ({ initialCount, steps }) => {\n    const [{ count, action }, setCount] = useState(initialCount, action: null });\n\n    const increment = () => {\n        setCount(({count }) => { count: count + steps, action: "increment-click" });\n\n    }\n\n    const inputChange = (e) => {\n        setCount(({count }) => { count: e.target.value, action: "input-change" });\n    }\n\n    return (<>\n        <input name="counter" value={count} onChange={inputChange} />\n        <button onClick={increment}>Increment</button>\n        <Tooltip>increments in steps of {steps}</Tooltip>\n    </>\n    );\n};'})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)(re,{children:"Group tests by render and user behaviours"}),Object(O.jsx)(ce,{children:"Group tests into describe blocks named render and behaviours at the top level. "}),Object(O.jsx)("p",{children:"The main advantages of grouping the tests is to:"}),Object(O.jsxs)(ae,{children:[Object(O.jsx)(le,{children:"Provide clarity to the reviewer/collaborator on where to find or add a specific test case"}),Object(O.jsxs)(le,{children:["Prompt the initial test author(s) to include tests for the two main scenarios that need testing:",Object(O.jsxs)(ae,{children:[Object(O.jsx)(le,{children:"Assert on things that appear on render"}),Object(O.jsx)(le,{children:"Assert on things that change after an user interaction"})]})]})]}),Object(O.jsx)(ue,{children:'describe("<Counter />", () => {\n    describe("render" => () => {\n        // include your tests for things that should happen on render\n    });\n\n    describe("behaviours" => () => {\n        // include your tests for things that should happen after user interactions\n    });\n});'})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)(re,{children:"Use a snapshot test to validate render"}),Object(O.jsxs)(ce,{children:["Snapshots are good for validating regressions when refactoring code and capturing changes to shared styled components. However snapshots have drawbacks, as they can:"," "]}),Object(O.jsxs)(ae,{children:[Object(O.jsx)(le,{children:"Slow down the test suite"}),Object(O.jsx)(le,{children:"Slow down the test suite"}),Object(O.jsx)(le,{children:"Generate errors in multiple components when making a minor change to a single component."})]}),Object(O.jsx)(ce,{children:"As such the guidelines for using snapshot tests are as follows:"}),Object(O.jsxs)(ae,{children:[Object(O.jsxs)(le,{children:["Generate at least 1 snapshot test per component on render to:",Object(O.jsxs)(ae,{children:[Object(O.jsx)(le,{children:"Validate shared styled-component changes that could affect this component."}),Object(O.jsx)(le,{children:"Validate any regressions when code refactoring."}),Object(O.jsxs)(le,{children:["Mock child components to reduce time to produce snapshots and to reduce the triggering of errors when making changes to components."," ",Object(O.jsx)(he,{children:"(See section Don't be afraid to stub child components)."})]})]})]}),Object(O.jsx)(le,{children:"Consider removing existing snapshots and generating new snapshots when making substantial changes to component functionality"}),Object(O.jsxs)(le,{children:["When refactoring a component you should use the"," ",Object(O.jsx)(de,{href:"https://jestjs.io/docs/snapshot-testing#interactive-snapshot-mode",target:"_blank",children:"interactive update snapshot mode"})," ","to update and review any changes to snapshots."]}),Object(O.jsx)(le,{children:"Closely review changes to snapshots in PRs as so not miss regressions"})]}),Object(O.jsx)(ue,{children:'describe("<Counter />", () => {\n\tdescribe("render" => () => {\n\t\tit("SHOULD render", () => {\n\t\t\tconst { asFragment } = render(<Counter />);\n\t\t\texpect(asFragment()).toMatchSnapshot();\n\t\t});\n\t});\n\n\tdescribe("behaviours" => () => {\n\t\t// include your tests for things that should happen after user interactions*\n\t});\n\n});'})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)(re,{children:"Use GIVEN-WHEN-THEN to describe branching logic"}),Object(O.jsxs)(ce,{children:["The biggest improvement to our tests readability has been determining a consistent language and structure for our test descriptions \u2013 and for not a lot of effort! We found that using the",Object(O.jsx)(de,{href:"https://www.agilealliance.org/glossary/gwt",target:"_blank",children:"GIVEN-WHEN-THEN"})," ","structure works really well for describing component tests when using the `react-testing-library`."]}),Object(O.jsxs)(ce,{children:[Object(O.jsx)(he,{children:"GIVEN"})," some context e.g. some component props, context, or state"]}),Object(O.jsxs)(ce,{children:[Object(O.jsx)(he,{children:"WHEN"})," some action is carried out e.g. a button is clicked or an user types in an input"]}),Object(O.jsxs)(ce,{children:[Object(O.jsx)(he,{children:"THEN"})," a particular set of observable set of consequences ",Object(O.jsx)(he,{children:"SHOULD"})," ","happen - e.g. some text has changed or no longer displays in the browser."]}),Object(O.jsx)(ce,{children:"We use GIVEN-WHEN-THEN in the following manner:"}),Object(O.jsxs)(ae,{children:[Object(O.jsxs)(le,{children:["Write the keywords ",Object(O.jsx)(be,{children:"GIVEN, WHEN, AND, NOT, SHOULD"})," in uppercase to make the structure easy to identify and read."]}),Object(O.jsxs)(le,{children:["Start with ",Object(O.jsx)(be,{children:"GIVEN before WHEN"})]}),Object(O.jsx)(le,{children:"Strict adherence is not required to the structure, focus should be placed on readability"})]}),Object(O.jsx)(ce,{children:"You will notice the example below creates meaningful sentences that describes each test scenario e.g."}),Object(O.jsxs)(ae,{children:[Object(O.jsxs)(le,{children:[Object(O.jsx)(be,{children:"<Counter />"})," render GIVEN a initial count AND steps great than zero SHOULD display provided count"]}),Object(O.jsxs)(le,{children:[Object(O.jsx)(be,{children:"<Counter />"})," behaviours WHEN a user clicks increase count button GIVEN steps SHOULD display provided count"]})]}),Object(O.jsx)(ue,{children:'describe("<Counter />", () => {\n    describe("render" => () => {\n        it("SHOULD render", () => {\n                // snapshot test\n        });\n\n        describe("GIVEN NO intial count", () => {\n            describe("AND steps greater than 0", () => {\n                it("SHOULD display count zero", () => {\n                    // ...\n                });\n            });\n        });\n\n        describe("GIVEN a initial count", () => {\n            it("SHOULD display provided count", () => {\n                // ...\n            });\n\n            describe("AND steps greater than 0", () => {\n                it("SHOULD display steps amount", () => {\n                        // ...\n                });\n            });\n\n            describe("AND steps is 0", () => {\n                it("SHOULD NOT display counter", () => {\n                    // ...\n                });\n                it("SHOULD THROW steps must be greater than 0 error", () => {\n                    // ...\n                });\n            });\n        });\n\n    });\n\n    describe("behaviours" => () => {\n\n        describe("WHEN a user clicks increase count button", () => {\n            it("SHOULD display incremented count", () => {\n                    // ...\n            });\n        });\n    \n        describe("WHEN a user clicks increase count button multiple times", () => {\n            it("SHOULD display incremented count", () => {\n                    // ...\n            });\n        });\n\n        describe("GIVEN steps", () => {\n            describe("WHEN a user clicks increase count button", () => {\n                it("SHOULD display incremented count", () => {\n                        // ...\n                });\n            });\n        \n            describe("WHEN a user clicks increase count button multiple times", () => {\n                it("SHOULD display incremented count", () => {\n                        // ...\n                });\n            });\n        });\n\n        describe("GIVEN an initial count", () => {\n            describe("WHEN a user clicks increase count button", () => {\n                it("SHOULD display incremented count", () => {\n                        // ...\n                });\n            });\n        \n            describe("WHEN a user clicks increase count button multiple times", () => {\n                it("SHOULD display incremented count", () => {\n                        // ...\n                });\n            });\n        });\n\n    });\n});'})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)(re,{children:"Don't be afraid to stub child components"}),Object(O.jsx)(ge,{source:"Martin Fowler",citeContent:"Mocks arent Stubs",citeLink:"https://martinfowler.com/articles/mocksArentStubs.html",children:"Stubs provide canned answers to calls made during the test, usually not responding at all to anything outside what's programmed in for the test. Stubs may also record information about calls, such as an email gateway stub that remembers the messages it \u2018sent\u2019, or maybe only how many messages it \u2018sent\u2019."}),Object(O.jsxs)(ce,{children:["Stubs are described as Mocks in Jest. See this article"," ",Object(O.jsx)(de,{href:"https://ericdcobb.medium.com/advanced-react-component-mocks-with-jest-and-react-testing-library-f1ae8838400b",target:"_blank",children:"Advanced React Component Mocks with Jest and React Testing Library"})," ","by Eric Cobb for details about how to use jest to stub components."]}),Object(O.jsx)(ce,{children:"These are unit tests and not integration tests. Stubbing out complex components can:"}),Object(O.jsxs)(ae,{children:[Object(O.jsx)(le,{children:"Reduce the amount of effort to write a test"}),Object(O.jsx)(le,{children:"Increases the speed of snapshot testing"}),Object(O.jsxs)(le,{children:["Allow you to stub browser behaviours. Not all features of the browser of are emulated in"," ",Object(O.jsx)(de,{href:"https://github.com/jsdom/jsdom",target:"_blank",children:"jsdom"}),", and in these scenarios it makes more sense to mock the child component or browser behaviour."]})]}),Object(O.jsxs)(ce,{children:["For example what if our counter example had a tooltip component within it. Usually tooltip components contain a lot of code and logic for figuring out where to position themselves on the page. Within our counter test, we don't care if the tooltip works \u2013 there should already be coverage in for this in our tooltip tests. In that case why let this component get in the way the counter tests or slow us down?"," "]}),Object(O.jsx)(ue,{children:'// Counter.jsx\n\nimport { Tooltip } from "./tooltip";\n\nconst Counter = ({ initialCount, steps }) => {\n\tconst [count, setCount] = useState(initialCount);\n\tconst increment = () => setCount((count) => count + steps);\n\n\treturn (<>\n\t\t<input name="counter" value={count} />\n\t\t<button onClick={increment}>Increment</button>\n\t\t<Tooltip>increments in steps of {steps}</Tooltip>\n\t</>);\n};\n\n// Counter.spec.jsx\n\njest.mock("./tooltip", () => {\n\tTooltip: ({ children }) => <>{children}</>;\n});'})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)(re,{children:"Don't re-test functionality of child components"}),Object(O.jsx)(ce,{children:"Referring back to our previous counter component example, we avoid testing that the tooltip works in the context of the counter component. We expect that the tooltip already has coverage in its own tests, and it usage within the counter component is only considered plumbing or configuration, which can just be validated by a developer, or in a code review."}),Object(O.jsx)(ce,{children:"e.g. We do not test the following:"}),Object(O.jsx)(ue,{children:'describe("<Counter />", () => {\n\t\tdescribe("behaviours", () => {\n\t\t\tdescribe("WHEN user mouseovers tooltip", () => {\n\t\t\t\t// AVOID TESTING THIS!\n\t\t\t\tit("SHOULD display tooltip text", () => {\n        });\n      });\n\t\t});\n});'})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)(re,{children:"Use a single expect per test"}),Object(O.jsxs)(ae,{children:[Object(O.jsx)(le,{children:"It's easier to debug failing tests"}),Object(O.jsx)(le,{children:"The test case is easier to read and understand what it is testing for"})]}),Object(O.jsx)(ue,{children:"describe(\"<Counter />\", () => {\n\tdescribe(\"behaviours\", () => {\n        // AVOID THIS\n\t\tdescribe(\"WHEN user clicks increment\", () => {\n            it(\"SHOULD display incremented value for each click by defined steps\", () => {\n                render(<Counter steps={5} intialCount={0}/>);\n                const incrementButton = screen.getByRole('button', { name: 'increment'});\n                userEvent.click(incrementButton);\n                const counter = screen.getByRole('textarea', { name: 'counter'})\n\n                expect(counter.value).toBe(5);\n\n                userEvent.click(incrementButton);\n                expect(counter.value).toBe(10);\n\n                            userEvent.click(incrementButton);\n                expect(counter.value).toBe(15);\n            });\n        \n        });\n\n        // PREFER THIS\n        describe(\"WHEN user clicks increment\", () => {\n            it(\"SHOULD display incremented value by defined steps\", () => {\n                render(<Counter steps={5} intialCount={0}/>);\n                const incrementButton = screen.getByRole('button', { name: 'increment'});\n                userEvent.click(incrementButton);\n                const counter = screen.getByRole('textarea', { name: 'counter'})\n\n                expect(counter.value).toBe(5);\n            });\n        });\n\n        describe(\"WHEN user clicks increment multiple times\", () => {\n            it(\"SHOULD display incremented value by defined steps times clicks\", () => {\n                render(<Counter steps={5} intialCount={0}/>);\n                const incrementButton = screen.getByRole('button', { name: 'increment'});\n                userEvent.click(incrementButton);\n                const counter = screen.getByRole('textarea', { name: 'counter'})\n                userEvent.click(incrementButton);\n                userEvent.click(incrementButton);\n                userEvent.click(incrementButton);\n\n                expect(counter.value).toBe(15);\n            });\n        });\n    });\n});"})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)(re,{children:"Accept unit testing UI components can be difficult"}),Object(O.jsxs)(ce,{children:["The"," ",Object(O.jsx)(de,{href:"https://testing-library.com/docs/react-testing-library/intro/",target:"_blank",children:"react-test-library"})," ","is limited by the functionality provided by"," ",Object(O.jsx)(de,{href:"https://github.com/jsdom/jsdom",target:"_blank",children:"js-dom"})," ","where not all all browser APIs are emulated, making it hard to test. Things usually difficult to test are:"]}),Object(O.jsx)(ae,{children:Object(O.jsx)(le,{children:"User scrolling within areas of the page. e.g. A common example of this is browser scrolling, for example, testing that data is loaded when a user scrolls past a threshold."})}),Object(O.jsx)(ce,{children:"When writing a particular test becomes too difficult, we should consider the following:"}),Object(O.jsxs)(ae,{children:[Object(O.jsx)(le,{children:"You may be testing for the wrong thing. e.g. Are you testing child components like in the tooltip example above?"}),Object(O.jsx)(le,{children:"Your component may be doing too much e.g. Is your component handling the retrieving of data from an API, rendering a list and calculating the printing out of pagination? If your component is doing more than 2-3 things you should consider splitting your component out into smaller components or hooks."}),Object(O.jsxs)(le,{children:["Is there another way you could test this? Could I write a simpler test?",Object(O.jsxs)(ae,{children:[Object(O.jsx)(le,{children:"What would it mean if you didn't have this test and there was an error in this part of the code?"}),Object(O.jsx)(le,{children:"Is there another way you could test this? e.g Could I write a simpler."}),Object(O.jsxs)(le,{children:["Is there another way you could test this? Could I write a simpler test?",Object(O.jsx)(ue,{children:'describe("WHEN user scrolls to bottom of page", () => {\n\t// TODO: Figure out how to test this\n\tit.skip("SHOULD load more results") \n});'})]})]})]})]})]}),Object(O.jsxs)("section",{children:[Object(O.jsxs)(re,{children:["Try use ",Object(O.jsx)(be,{children:"getByRole"})]}),Object(O.jsxs)(ce,{children:["If you familiarise yourself with the testing libraries documentation on"," ",Object(O.jsx)(de,{href:"https://testing-library.com/docs/queries/about/#priority",target:"_blank",children:"priority of queries"})," ","you will notice that the first query suggested to utilise is ",Object(O.jsx)(be,{children:"getByRole"}),"."," "]}),Object(O.jsxs)(ce,{children:["For the majority of user behaviours, there is a way to use ",Object(O.jsx)(be,{children:"getByRole"}),". to find the element to interact with. The ability to query an element using"," ",Object(O.jsx)(be,{children:"getByRole"}),". means it will very likely be accessible and visible to screen readers."," "]}),Object(O.jsxs)(ce,{children:["I recommend reviewing the"," ",Object(O.jsx)(de,{href:"https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles",target:"_blank",children:"MDN docs for ARIA Roles"})," ","to figure out the best way to add the correct roles to your interactive elements so that",Object(O.jsx)(be,{children:"getByRole"}),". can be used."]}),Object(O.jsxs)(ce,{children:["For example for a ",Object(O.jsx)(be,{children:"button"})," element you can use the attribute"," ",Object(O.jsx)(be,{children:'aria-pressed="true"'})," to represent a button is active or inactive."]}),Object(O.jsxs)(ce,{children:["I will use the example of a ",Object(O.jsx)(be,{children:"ToggleButton"})," that can either be on or off to show how we can now test a button's active state using ",Object(O.jsx)(be,{children:"getByRole"}),"."," "]}),Object(O.jsx)(ue,{children:'// ToggleButton.js\nconst ToggleButton = ({intialActive}) => {\n    const [isActive, setActive] = useState(intialActive)\n    return (<button aria-pressed={isActive}>{ isActive? \'On\': \'Off\' }</button>\n}\n\nOnOffSwitch.defaultProps = {\n    intialActive; false\n}\n\n// ToggleButton.spec.js\ndescribe("<ToggleButton />", () => {\n\tdescribe("behaviours", () => {\n     describe("GIVEN button is toggled off", () => {\n        describe("WHEN user clicks toggle button", () => {\n            it("SHOULD set button state inactive", () => {\n                render(<ToggleBtn />)\n                const toggle = screen.getByRole(\'button\', { name: /off/i, pressed: false });\n                userEvent.click(toggle)\n                const activeToggle = screen.getByRole(\'button\', { name: /on/i, pressed: true});\n\n                expect(activeToggle).toBeInTheDocument();\n            });\n        });\n     });\n  });\n});'})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)(re,{children:"Isolate complex component logic into a hooks and helper functions and test separately"}),Object(O.jsx)(ce,{children:"In the counter component example, if we wanted to add a feature that allows users to provide their own value using keyboard input, this would require more logic to be added into our component."}),Object(O.jsxs)(ce,{children:["Adding more logic will increase the amount of tests and responsibilities for that component. By refactoring some of the logic into a ",Object(O.jsx)(be,{children:"useCounter"})," hook, we can split out the responsibility and make things easier to test."]}),Object(O.jsxs)(ce,{children:["The refactored counter component and ",Object(O.jsx)(be,{children:"useCounter"})," hook"]}),Object(O.jsx)(ue,{children:'// useCounter.js\nexport const useCounter = (initialCount, steps) => {\n\n\tconst [count, setCount] = useState(initialCount);\n\t\n\tconst increment = () => {\n\t\tsetCount(({count }) => count + steps);\n\t}\n\n\treturn { count, increment, setCount  }\n}\n\n// Counter.js\nexport const Counter = ({ initialCount, steps }) => {\n\n\tconst { count, increment, setCount } =  useCounter(initialCount, steps );\n\n\treturn (<>\n\t\t<input name="counter" value={count} onChange={(e) => setCount(e.target.value)} />\n\t\t<button onClick={increment}>Increment</button>\n\t\t<Tooltip>increments in steps of {steps}</Tooltip>\n\t</>);\n};'}),Object(O.jsx)(ce,{children:"The updated tests"}),Object(O.jsx)(ue,{children:'// useCounter.spec.js\ndescribe("useCounter", () => {\n    describe("GIVEN intialCount AND steps", () => {\n        it("SHOULD set count to intialCount", () => {\n            const { result } = renderHook(() => useCounter({ intialCount: 5, steps: 10 }))\n\n            expect(result.current.count).toBe(5);\n        });\n\n    describe("GIVEN increment()", () => {\n\t    it("SHOULD increase count by steps", () => {\n\t        const { result } = renderHook(() => useCounter({ intialCount: 5, steps: 10 }))\n            act(() => {\n            result.current.increment()\n            })\n            expect(result.current.count).toBe(15);\n        });\n    });\n\n    describe("GIVEN setCount() with new value", () =>{\n        it("SHOULD update count value", () => {\n            const { result } = renderHook(() => useCounter({ intialCount: 5, steps: 10 }))\n            act(() => {\n            result.current.setCount(20)\n            })\n            expect(result.current.count).toBe(20);\n        });\n\t});\n});\n\n// Counter.spec.js\ndescribe("<Counter />", () => {\n\n    describe("render" => () => {\n        it("SHOULD render", () => {\n            const { asFragment } =  render(<Counter />);\n\n            expect(asFragment()).toMatchSnapshot();\n        });\n    });\n});'})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)(re,{children:"Conclusion"}),Object(O.jsx)(ce,{children:"After following these guidelines we went from having a haphazard approach to writing and structuring UI tests, to having a clear and consistent method. There are many different ways to write, structure, and organise tests, and this is by no means the best or only approach, but one that worked for us."}),Object(O.jsxs)(ce,{children:["If you want to improve testing in your codebase you should consider agreeing on a set of guidelines that suits your team."," "]})]})]})},fe=j.a.article(Z||(Z=Object(b.a)(["\n    background-color: #f7fff6;\n    border-radius: 1rem;\n\n    "," {\n        padding: 2rem 25%;\n    }\n\n    "," {\n        padding: 2rem 10%;\n    }\n\n    "," {\n        padding: 2rem 5%;\n    }\n"])),p,g,m),we=function(){var e=Object(u.f)().article;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(k,{}),Object(O.jsxs)(fe,{children:["how-our-team-writes-tests"===e&&Object(O.jsx)(xe,{}),"heres-what-happened-after"===e&&Object(O.jsx)(Oe,{})]})]})},ye=j.a.article($||($=Object(b.a)(["\n    background-color: #f7fff6;\n    border-radius: 1rem;\n\n    "," {\n        padding: 2rem 25%;\n    }\n\n    "," {\n        padding: 2rem 10%;\n    }\n\n    "," {\n        padding: 2rem 5%;\n    }\n"])),p,g,m),ve=function(){return Object(O.jsxs)(ye,{children:[Object(O.jsxs)(I.a,{children:[Object(O.jsx)("title",{children:"Contact | Robert Prib | Blog "}),Object(O.jsx)("meta",{name:"description",content:"Personal blog of Robert Prib with articles on web development"}),Object(O.jsx)("meta",{name:"og:title",content:"Contact | Robert Prib | Blog"}),Object(O.jsx)("meta",{name:"og:description",content:"Articles on web development"}),Object(O.jsx)("meta",{name:"og:url",content:"https://whassup.github.io/blog/contact"})]}),Object(O.jsx)(k,{}),Object(O.jsx)("iframe",{src:"https://docs.google.com/forms/d/e/1FAIpQLSdRfFhCTe403ldrqTt41Mj9tAOCMxVKSboV6JVYOimOcus7iQ/viewform?embedded=true",width:"640",height:"750",frameBorder:"0",marginHeight:0,marginWidth:0,children:"Loading\u2026"})]})},ke=j.a.article(ee||(ee=Object(b.a)(["\n    display: flex;\n    flex-direction: column;\n    gap: 3rem;\n    padding: 0 15%;\n"]))),Ie=j.a.article(te||(te=Object(b.a)(["\n    display: flex;\n    flex-direction: column;\n    gap: 1.5rem;\n    align-items: center;\n    background-color: #f7fff6;\n    padding: 2rem 4rem;\n    border-radius: 1rem;\n"]))),Ce=j.a.div(ne||(ne=Object(b.a)(["\n    text-align: left;\n"]))),He=Object(j.a)(h.b)(se||(se=Object(b.a)(["\n    text-transform: uppercase;\n    font-weight: 700;\n    color: #000;\n"]))),Te=function(){return Object(O.jsxs)(ke,{children:[Object(O.jsxs)(Ie,{children:[Object(O.jsx)(ie,{children:Object(O.jsx)(h.b,{to:"/blog/article/heres-what-happened-after",children:"Here's what happened after publishing my first article"})}),Object(O.jsx)(oe,{children:Object(O.jsx)("time",{children:"12 August 2021"})}),Object(O.jsxs)(Ce,{children:[Object(O.jsx)(ce,{children:'This year I published my first article "How our team writes React tests and other stuff too" . What happened after sharing my content didn\'t follow the script I had envisioned. The results are not surprising; here is what happened.'}),Object(O.jsxs)(ae,{children:[Object(O.jsx)(le,{children:"Viewership was lower than I expected"}),Object(O.jsx)(le,{children:"No one commented"}),Object(O.jsx)(le,{children:"Reddit removed my posts"}),Object(O.jsx)(le,{children:"Sharing this content was useful for myself"}),Object(O.jsx)(le,{children:"I gained valuable insights"}),Object(O.jsx)(le,{children:"There is a great deal more for me to learn about writing & publishing online"})]})]}),Object(O.jsx)(He,{to:"/blog/article/heres-what-happened-after",children:"Read more"})]}),Object(O.jsxs)(Ie,{children:[Object(O.jsx)(ie,{children:Object(O.jsx)(h.b,{to:"/blog/article/how-our-team-writes-tests",children:"How our team writes React tests and other stuff too"})}),Object(O.jsx)(oe,{children:Object(O.jsx)("time",{children:"5 June 2021"})}),Object(O.jsxs)(Ce,{children:[Object(O.jsx)(ce,{children:"Have you ever worked in a codebase where each test file was different to the next? Different terminology and grouping of test scenarios; different usages of snapshot testing and react-testing-library."}),Object(O.jsx)(ce,{children:"The effect of this meant wasted time reading a full test file to understand its structure before adding another test case. Creating new tests involved making multiple decisions; should I copy the structure of an existing test or create a new one? Should I use snapshot tests?"}),Object(O.jsx)(ce,{children:"We solved this problem by defining guidelines to follow, that make writing tests that are easy to read and write, and would reduced wasted time on decisions."})]}),Object(O.jsx)(He,{to:"/blog/article/how-our-team-writes-tests",children:"Read more"})]})]})},Se=function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(I.a,{children:[Object(O.jsx)("title",{children:"Home | Robert Prib | Blog "}),Object(O.jsx)("meta",{name:"description",content:"Personal blog of Robert Prib with articles on web development"}),Object(O.jsx)("meta",{name:"og:title",content:"Personal blog of Robert Prib"}),Object(O.jsx)("meta",{name:"og:description",content:"Articles on web development"}),Object(O.jsx)("meta",{name:"og:url",content:"https://whassup.github.io/blog/"})]}),Object(O.jsx)(k,{}),Object(O.jsx)(Te,{})]})},Ee=function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(h.a,{children:Object(O.jsxs)(u.c,{children:[Object(O.jsx)(u.a,{exact:!0,path:"/blog/about"}),Object(O.jsx)(u.a,{exact:!0,path:"/blog/article/:article",children:Object(O.jsx)(we,{})}),Object(O.jsx)(u.a,{exact:!0,path:"/blog/contact",children:Object(O.jsx)(ve,{})}),Object(O.jsx)(u.a,{exact:!0,strict:!1,path:"/blog",children:Object(O.jsx)(Se,{})})]})})})},Ne=(n(87),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,93)).then((function(t){var n=t.getCLS,s=t.getFID,i=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),s(e),i(e),r(e),o(e)}))}),Re=document.getElementById("root");Re&&Re.hasChildNodes()?Object(d.hydrate)(Object(O.jsx)(Ee,{}),Re):Object(d.render)(Object(O.jsx)(Ee,{}),Re),Ne()}},[[88,1,2]]]);
//# sourceMappingURL=main.51be100f.chunk.js.map